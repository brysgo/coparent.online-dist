(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{2099:(e,r,s)=>{"use strict";s.d(r,{H:()=>n,k:()=>i});var a=s(4982),t=s(7358);let i=()=>{let e="https://gjgldkinpnckfwzwdbmt.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdqZ2xka2lucG5ja2Z3endkYm10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0OTczMDYsImV4cCI6MjA2NzA3MzMwNn0.5ZQourcUdjk19MWjLQ9O0VhcHJj09YPzcxbN35MfMtQ";return e&&r?(0,a.UU)(e,r):(console.warn("Supabase environment variables not found, using fallback values for static generation"),(0,a.UU)("https://placeholder.supabase.co","placeholder-anon-key"))},n=()=>{let e="https://gjgldkinpnckfwzwdbmt.supabase.co",r=t.env.SUPABASE_SERVICE_ROLE_KEY;return e&&r?(0,a.UU)(e,r,{auth:{autoRefreshToken:!1,persistSession:!1}}):(console.warn("Supabase service role environment variables not found, using fallback values for static generation"),(0,a.UU)("https://placeholder.supabase.co","placeholder-service-role-key",{auth:{autoRefreshToken:!1,persistSession:!1}}))}},4906:(e,r,s)=>{Promise.resolve().then(s.bind(s,5034))},5034:(e,r,s)=>{"use strict";s.d(r,{DayPreferenceSorting:()=>d});var a=s(5155),t=s(2115),i=s(4110),n=s(2099);let l=[{id:"0",label:"Sunday",description:"Weekend day"},{id:"1",label:"Monday",description:"Start of school week"},{id:"2",label:"Tuesday",description:"School day"},{id:"3",label:"Wednesday",description:"Mid-week"},{id:"4",label:"Thursday",description:"School day"},{id:"5",label:"Friday",description:"End of school week"},{id:"6",label:"Saturday",description:"Weekend day"}];function d(e){let{relationshipId:r,currentUserId:s,existingPreferences:d=[],otherParentPreferences:o=[]}=e,[c,p]=(0,t.useState)(l),[u,h]=(0,t.useState)(!1),[f,y]=(0,t.useState)(null),[m,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(d.length>0){let e=[...d].sort((e,r)=>e.priority-r.priority),r=e.map(e=>l.find(r=>parseInt(r.id)===e.dayOfWeek)),s=new Set(e.map(e=>e.dayOfWeek.toString()));p([...r,...l.filter(e=>!s.has(e.id))])}},[d]);let k=async e=>{h(!0),y(null);try{let a=(0,n.k)(),t=e.map((e,a)=>({relationshipId:r,userId:s,dayOfWeek:parseInt(e.id),priority:a+1})),{error:i}=await a.from("day_preferences").upsert(t);if(i)throw i;p(e)}catch(e){y("Error saving preferences. Please try again."),console.error("Error saving day preferences:",e)}finally{h(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[o.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Other Parent's Preferences"}),(0,a.jsx)("button",{onClick:()=>b(!m),className:"text-blue-600 hover:text-blue-800 text-sm",children:m?"Hide":"Show"})]}),m&&(0,a.jsx)("div",{className:"space-y-2",children:o.sort((e,r)=>e.priority-r.priority).map((e,r)=>{let s=l.find(r=>parseInt(r.id)===e.dayOfWeek);return(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-xs mr-3",children:r+1}),(0,a.jsx)("span",{children:null==s?void 0:s.label})]},e.dayOfWeek)})})]}),f&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-red-800",children:f})}),u&&(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Saving your preferences..."})}),(0,a.jsx)(i.S,{items:c,onSortComplete:k,title:"Sort Your Day Preferences",description:"Rank the days of the week by your preference to have your child. Most preferred days will be ranked higher."})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[212,982,796,110,441,684,358],()=>r(4906)),_N_E=e.O()}]);