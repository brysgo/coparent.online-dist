(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{4906:(e,r,t)=>{Promise.resolve().then(t.bind(t,5034))},5034:(e,r,t)=>{"use strict";t.d(r,{DayPreferenceSorting:()=>l});var s=t(5155),a=t(2115),i=t(4110),d=t(7926);let n=[{id:"0",label:"Sunday",description:"Weekend day"},{id:"1",label:"Monday",description:"Start of school week"},{id:"2",label:"Tuesday",description:"School day"},{id:"3",label:"Wednesday",description:"Mid-week"},{id:"4",label:"Thursday",description:"School day"},{id:"5",label:"Friday",description:"End of school week"},{id:"6",label:"Saturday",description:"Weekend day"}];function l(e){let{relationshipId:r,currentUserId:t,existingPreferences:l=[],otherParentPreferences:c=[],onPreferencesUpdated:o}=e,[y,h]=(0,a.useState)(n),[p,u]=(0,a.useState)(!1),[f,m]=(0,a.useState)(null),[x,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(l.length>0){let e=[...l].sort((e,r)=>e.priority-r.priority),r=e.map(e=>n.find(r=>parseInt(r.id)===e.dayOfWeek)),t=new Set(e.map(e=>e.dayOfWeek.toString()));h([...r,...n.filter(e=>!t.has(e.id))])}},[l]);let g=async e=>{u(!0),m(null);try{let s=e.map((e,r)=>({dayOfWeek:parseInt(e.id),priority:r+1}));await d.t.saveDayPreferences(t,r,s),h(e),o&&o()}catch(e){m("Error saving preferences. Please try again."),console.error("Error saving day preferences:",e)}finally{u(!1)}};return(0,s.jsxs)("div",{className:"space-y-6","data-testid":"day-preferences",children:[c.length>0&&(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Other Parent's Preferences"}),(0,s.jsx)("button",{onClick:()=>b(!x),className:"text-blue-600 hover:text-blue-800 text-sm",children:x?"Hide":"Show"})]}),x&&(0,s.jsx)("div",{className:"space-y-2",children:c.sort((e,r)=>e.priority-r.priority).map((e,r)=>{let t=n.find(r=>parseInt(r.id)===e.dayOfWeek);return(0,s.jsxs)("div",{className:"flex items-center text-sm",children:[(0,s.jsx)("span",{className:"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-xs mr-3",children:r+1}),(0,s.jsx)("span",{children:null==t?void 0:t.label})]},e.dayOfWeek)})})]}),f&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-red-800",children:f})}),p&&(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Saving your preferences..."})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("button",{"data-testid":"sort-day-preferences",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>{let e=document.querySelector('[data-testid="sorting-component"]');e&&e.scrollIntoView({behavior:"smooth"})},children:"Start Sorting Day Preferences"})}),(0,s.jsx)(i.S,{items:y,onSortComplete:g,title:"Sort Your Day Preferences",description:"Rank the days of the week by your preference to have your child. Most preferred days will be ranked higher."})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[277,982,804,796,110,926,441,684,358],()=>r(4906)),_N_E=e.O()}]);