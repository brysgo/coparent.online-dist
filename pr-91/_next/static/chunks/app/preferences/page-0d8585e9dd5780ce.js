(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[259],{387:(e,t,s)=>{"use strict";s.d(t,{Q:()=>o});var r=s(5155),a=s(2115),n=s(4110),l=s(285),i=s(6695);function d(e){let{selectedDates:t,onDatesChange:s,onStartSorting:n,holidayData:d={}}=e,[c,o]=(0,a.useState)(""),m=e=>{let r=new Date;if(r.setHours(0,0,0,0),e<r)return;let a=e.toISOString().split("T")[0];t.map(e=>e.toISOString().split("T")[0]).includes(a)||s([...t,e])},h=e=>{s(t.filter(t=>t.toISOString()!==e.toISOString()))},x=e=>{let t=d[e.toISOString().split("T")[0]];return t?"".concat(t," (").concat(e.toLocaleDateString(),")"):e.toLocaleDateString()},u=[{date:new Date("2024-12-25"),label:"Christmas Day"},{date:new Date("2024-01-01"),label:"New Year's Day"},{date:new Date("2024-07-04"),label:"Independence Day"},{date:new Date("2024-11-28"),label:"Thanksgiving"},{date:new Date("2024-10-31"),label:"Halloween"},{date:new Date("2024-02-14"),label:"Valentine's Day"}].filter(e=>{let t=new Date;return t.setHours(0,0,0,0),e.date>=t});return(0,r.jsxs)(i.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Select Important Dates"}),(0,r.jsx)(i.BT,{children:"Choose the dates that are most important to you for having your child. You'll then sort them by priority."})]}),(0,r.jsxs)(i.Wu,{className:"space-y-6",children:[t.length>0&&(0,r.jsxs)("div",{"data-testid":"selected-dates",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium mb-2",children:["Selected Dates (",t.length,")"]}),(0,r.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,r.jsxs)("div",{"data-testid":"selected-".concat(e.toISOString()),className:"flex items-center justify-between p-2 bg-blue-50 rounded-md",children:[(0,r.jsx)("span",{className:"text-sm",children:x(e)}),(0,r.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>h(e),className:"text-red-600 hover:text-red-800",children:"Remove"})]},e.toISOString()))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Common Important Dates"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:u.map(e=>{let s=t.some(t=>t.toISOString().split("T")[0]===e.date.toISOString().split("T")[0]);return(0,r.jsx)(l.$,{variant:s?"secondary":"outline",size:"sm",onClick:()=>m(e.date),disabled:s,className:"text-xs",children:e.label},e.date.toISOString())})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Add Custom Date"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"date",value:c,onChange:e=>o(e.target.value),min:new Date().toISOString().split("T")[0],className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"}),(0,r.jsx)(l.$,{onClick:()=>{c&&(m(new Date(c)),o(""))},disabled:!c,size:"sm",children:"Add Date"})]})]}),(0,r.jsxs)("div",{className:"pt-4 border-t",children:[(0,r.jsx)(l.$,{"data-testid":"start-sorting",onClick:n,disabled:t.length<2,className:"w-full",size:"lg",children:t.length<2?"Select at least 2 dates to start sorting (".concat(t.length,"/2)"):"Start Sorting ".concat(t.length," Dates")}),t.length>=2&&(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2 text-center",children:"You'll compare dates to determine which are most important to you"})]})]})]})}var c=s(7926);function o(e){let{relationshipId:t,currentUserId:s,selectedDates:l=[],existingPreferences:i=[],holidayData:o={},onPreferencesUpdated:m}=e,[h,x]=(0,a.useState)(l),[u,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),j=e=>{let t=new Date;return t.setHours(0,0,0,0),e.filter(e=>{let s=new Date(e);return s.setHours(0,0,0,0),s>=t})},N=async e=>{g(!0),b(null);try{let r=e.map((e,t)=>({date:e.id,priority:t+1}));await c.t.saveDatePreferences(s,t,r),p(!1),m&&m()}catch(e){b("Error saving preferences. Please try again."),console.error("Error saving date preferences:",e)}finally{g(!1)}},v=()=>{p(!1)};if(u){let e=(e=>{let t=j(e).map(e=>{let t=e.toISOString().split("T")[0],s=o[t];return{id:t,label:s||e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),description:s?e.toLocaleDateString():void 0,metadata:{date:t,isHoliday:!!s}}});if(i.length>0){let e=new Map(i.map(e=>[e.date,e.priority]));t.sort((t,s)=>(e.get(t.id)||999)-(e.get(s.id)||999))}return t})(h);return e.length<2?(0,r.jsxs)("div",{className:"text-center p-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"No Future Dates to Sort"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"All selected dates are in the past. Please select future dates to sort."}),(0,r.jsx)("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Back to Date Selection"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[y&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:y}),(0,r.jsx)(n.S,{items:e,onSortComplete:N,title:"Sort Your Date Preferences",description:"Compare pairs of dates to determine which are most important to you for having your child."}),f&&(0,r.jsx)("div",{className:"text-center py-4",children:(0,r.jsxs)("div",{className:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-blue-500",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving preferences..."]})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:v,className:"text-blue-600 hover:text-blue-800 text-sm",disabled:f,children:"← Back to Date Selection"})})]})}return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Date Preference Sorting"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Select important dates and sort them by priority to help with custody scheduling."})]}),(0,r.jsx)(d,{selectedDates:h,onDatesChange:x,onStartSorting:()=>{p(!0)},holidayData:o}),i.length>0&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,r.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"Your Current Preferences"}),(0,r.jsx)("div",{className:"space-y-1",children:i.sort((e,t)=>e.priority-t.priority).map((e,t)=>{let s=o[e.date],a=new Date(e.date),n=s||a.toLocaleDateString();return(0,r.jsxs)("div",{className:"text-sm text-blue-800",children:[t+1,". ",n]},e.date)})})]})]})}},469:(e,t,s)=>{"use strict";s.d(t,{m:()=>o});var r=s(5155),a=s(2115),n=s(4110),l=s(2099);let i=["7:00","8:00","9:00","12:00","15:00","16:00","17:00","18:00","19:00","20:00"],d=["8:00","9:00","10:00","11:00","12:00","14:00","16:00","17:00","18:00","19:00","20:00"],c={"7:00":"Early morning","8:00":"Before school/work","9:00":"Morning","12:00":"Lunch time","15:00":"After school","16:00":"Late afternoon","17:00":"Before dinner","18:00":"Dinner time","19:00":"After dinner","20:00":"Evening","21:00":"Late evening"};function o(e){let{relationshipId:t,currentUserId:s,dayType:o,existingPreferences:m=[],timeSlots:h,onPreferencesUpdated:x}=e,[u,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[y,b]=(0,a.useState)(!1),[j,N]=(0,a.useState)([]),v=(0,l.k)(),S=h||("weekday"===o?i:d);(0,a.useEffect)(()=>{N(m.filter(e=>e.dayType===o).map(e=>e.time))},[m,o]);let w=e=>{let[t,s]=e.split(":"),r=parseInt(t);return"".concat(0===r?12:r>12?r-12:r,":").concat(s," ").concat(r>=12?"PM":"AM")},k=e=>c[e]||"",D=(e,t)=>{t?N(t=>[...t,e]):N(t=>t.filter(t=>t!==e))},P=async e=>{p(!0),g(null);try{let r=e.map((e,r)=>({relationshipId:t,userId:s,time:e.id,dayType:o,priority:r+1,context:k(e.id)}));await v.from("handoff_time_preferences").delete().eq("relationshipId",t).eq("userId",s).eq("dayType",o);let{error:a}=await v.from("handoff_time_preferences").insert(r);if(a)throw a;if(x){let e=r.map((e,t)=>({...e,id:"temp-".concat(t),createdAt:new Date,updatedAt:new Date}));x(e)}b(!1)}catch(e){g("Error saving handoff time preferences. Please try again."),console.error("Error saving handoff time preferences:",e)}finally{p(!1)}};if(y){let e=(()=>{let e=m.filter(e=>e.dayType===o).reduce((e,t)=>(e[t.time]=t,e),{});return j.sort((t,s)=>{let r=e[t],a=e[s];return r&&a?r.priority-a.priority:r?-1:a?1:t.localeCompare(s)}).map(e=>({id:e,label:w(e),description:k(e),metadata:{time:e,dayType:o}}))})();return(0,r.jsxs)("div",{className:"space-y-4",children:[u&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,r.jsx)("p",{className:"text-blue-800",children:"Saving your preferences..."})}),f&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:f})}),(0,r.jsx)("button",{onClick:()=>{b(!1),g(null)},className:"mb-4 text-blue-600 hover:text-blue-800 flex items-center",disabled:u,children:"← Back to Time Selection"}),(0,r.jsx)(n.S,{items:e,onSortComplete:P,title:"Sort Your ".concat("weekday"===o?"Weekday":"Weekend"," Handoff Time Preferences"),description:"Choose which handoff time you prefer when given the option. Your most preferred time will be ranked first."})]})}return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold mb-2",children:["weekday"===o?"Weekday":"Weekend"," Handoff Time Preferences"]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Select your preferred handoff times and sort them by preference to help with custody scheduling."})]}),f&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:f})}),(0,r.jsxs)("div",{"data-testid":"time-selector",className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Select Preferred Handoff Times"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:S.map(e=>(0,r.jsxs)("label",{className:"\n                flex items-center space-x-2 p-3 rounded-lg border cursor-pointer transition-colors\n                ".concat(j.includes(e)?"bg-blue-50 border-blue-300 text-blue-900":"bg-white border-gray-200 hover:bg-gray-50","\n              "),children:[(0,r.jsx)("input",{type:"checkbox",checked:j.includes(e),onChange:t=>D(e,t.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","data-testid":"time-".concat(e)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:w(e)}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:k(e)})]})]},e))}),(0,r.jsxs)("div",{"data-testid":"selected-times",className:"mt-4",children:[(0,r.jsxs)("h3",{className:"text-md font-medium mb-2",children:["Selected Times (",j.length,")"]}),j.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map(e=>(0,r.jsxs)("span",{"data-testid":"selected-".concat(e),className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[w(e),(0,r.jsx)("button",{onClick:()=>D(e,!1),className:"ml-2 text-blue-600 hover:text-blue-800","aria-label":"Remove ".concat(w(e)),children:"\xd7"})]},e))}):(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"No times selected"})]}),(0,r.jsx)("button",{onClick:()=>{if(j.length<2)return void g("Please select at least 2 handoff times to sort.");b(!0),g(null)},disabled:j.length<2||u,"data-testid":"start-sorting",className:"\n            w-full py-3 px-4 rounded-md font-medium transition-colors\n            ".concat(j.length>=2&&!u?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed","\n          "),children:u?"Saving...":"Start Sorting Preferences"}),j.length<2&&(0,r.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Select at least 2 handoff times to enable sorting"})]})]})}},3538:(e,t,s)=>{Promise.resolve().then(s.bind(s,6933))},5034:(e,t,s)=>{"use strict";s.d(t,{DayPreferenceSorting:()=>d});var r=s(5155),a=s(2115),n=s(4110),l=s(7926);let i=[{id:"0",label:"Sunday",description:"Weekend day"},{id:"1",label:"Monday",description:"Start of school week"},{id:"2",label:"Tuesday",description:"School day"},{id:"3",label:"Wednesday",description:"Mid-week"},{id:"4",label:"Thursday",description:"School day"},{id:"5",label:"Friday",description:"End of school week"},{id:"6",label:"Saturday",description:"Weekend day"}];function d(e){let{relationshipId:t,currentUserId:s,existingPreferences:d=[],otherParentPreferences:c=[],onPreferencesUpdated:o}=e,[m,h]=(0,a.useState)(i),[x,u]=(0,a.useState)(!1),[p,f]=(0,a.useState)(null),[g,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(d.length>0){let e=[...d].sort((e,t)=>e.priority-t.priority),t=e.map(e=>i.find(t=>parseInt(t.id)===e.dayOfWeek)),s=new Set(e.map(e=>e.dayOfWeek.toString()));h([...t,...i.filter(e=>!s.has(e.id))])}},[d]);let b=async e=>{u(!0),f(null);try{let r=e.map((e,t)=>({dayOfWeek:parseInt(e.id),priority:t+1}));await l.t.saveDayPreferences(s,t,r),h(e),o&&o()}catch(e){f("Error saving preferences. Please try again."),console.error("Error saving day preferences:",e)}finally{u(!1)}};return(0,r.jsxs)("div",{className:"space-y-6","data-testid":"day-preferences",children:[c.length>0&&(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Other Parent's Preferences"}),(0,r.jsx)("button",{onClick:()=>y(!g),className:"text-blue-600 hover:text-blue-800 text-sm",children:g?"Hide":"Show"})]}),g&&(0,r.jsx)("div",{className:"space-y-2",children:c.sort((e,t)=>e.priority-t.priority).map((e,t)=>{let s=i.find(t=>parseInt(t.id)===e.dayOfWeek);return(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)("span",{className:"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-xs mr-3",children:t+1}),(0,r.jsx)("span",{children:null==s?void 0:s.label})]},e.dayOfWeek)})})]}),p&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:p})}),x&&(0,r.jsx)("div",{className:"text-center py-4",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Saving your preferences..."})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{"data-testid":"sort-day-preferences",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>{let e=document.querySelector('[data-testid="sorting-component"]');e&&e.scrollIntoView({behavior:"smooth"})},children:"Start Sorting Day Preferences"})}),(0,r.jsx)(n.S,{items:m,onSortComplete:b,title:"Sort Your Day Preferences",description:"Rank the days of the week by your preference to have your child. Most preferred days will be ranked higher."})]})}},6933:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(5155),a=s(2115),n=s(5034),l=s(387),i=s(469),d=s(2099),c=s(7926);function o(){var e;let{user:t,currentRelationship:s,loading:o,error:m}=function(){let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)([]),[n,l]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0),[o,m]=(0,a.useState)(null),h=(0,d.k)();(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{c(!0),m(null);let{data:{user:e},error:s}=await h.auth.getUser();if(s)throw s;if(!e){t(null),r([]),l(null);return}let{data:a,error:i}=await h.from("users").select("*").eq("id",e.id).single();if(i)throw i;t(a);let{data:d,error:o}=await h.from("co_parent_relationships").select("\n          *,\n          child:children(*)\n        ").or("parent_a_id.eq.".concat(e.id,",parent_b_id.eq.").concat(e.id));if(o)throw o;r(d||[]),d&&d.length>0&&!n&&l(d[0])}catch(t){console.error("useAuthData: Error fetching user data:",t);let e="Failed to fetch user data";t.message.includes("Failed to fetch")||t.message.includes("Network")?e="Network error. Please check your internet connection and try again.":t.message.includes("Auth session missing")&&(e="Authentication session expired. Please sign in again."),m(e)}finally{c(!1)}};return{user:e,relationships:s,currentRelationship:n,loading:i,error:o,setCurrentRelationshipId:e=>{let t=s.find(t=>t.id===e);t&&l(t)}}}(),[h,x]=(0,a.useState)(null),[u,p]=(0,a.useState)(null),[f,g]=(0,a.useState)(!0),[y,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{t&&s?j():o||g(!1)},[t,s,o]);let j=async()=>{if(t&&s)try{g(!0),b(null);let e=await c.t.getUserPreferences(t.id,s.id);x(e);let r=s.parent_a_id===t.id?s.parent_b_id:s.parent_a_id,a=await c.t.getUserPreferences(r,s.id);p(a)}catch(e){console.error("PreferencesPage: Error loading preferences:",e),b(e.message||"Failed to load preferences")}finally{g(!1)}},N=()=>{j()};return o||f?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-8"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})]})})}):m||y?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-red-800 font-semibold mb-2",children:"Error Loading Preferences"}),(0,r.jsx)("p",{className:"text-red-600",children:m||y}),(0,r.jsx)("button",{onClick:j,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Try Again"})]})})}):t&&s?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Preferences"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Set your preferences for scheduling and co-parenting arrangements. These preferences will be saved and applied when creating or suggesting schedules."}),s&&(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Current relationship: Child - ",(null==(e=s.child)?void 0:e.name)||"Unknown"]})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Day Preferences"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Rank the days of the week by your preference to have your child. Most preferred days will be prioritized in scheduling suggestions."}),(0,r.jsx)(n.DayPreferenceSorting,{relationshipId:s.id,currentUserId:t.id,existingPreferences:(null==h?void 0:h.dayPreferences)||[],otherParentPreferences:(null==u?void 0:u.dayPreferences)||[],onPreferencesUpdated:N})]}),(0,r.jsxs)("section",{"data-testid":"date-preferences",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Date Preferences"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Select and rank specific dates that are important to you (holidays, birthdays, special events)."}),(0,r.jsx)(l.Q,{relationshipId:s.id,currentUserId:t.id,selectedDates:[],existingPreferences:(null==h?void 0:h.datePreferences)||[],onPreferencesUpdated:N})]}),(0,r.jsxs)("section",{"data-testid":"handoff-time-preferences",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Handoff Time Preferences"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Set your preferred times for child handoffs. Different times can be set for weekdays and weekends."}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Weekday Handoff Times"}),(0,r.jsx)(i.m,{relationshipId:s.id,currentUserId:t.id,dayType:"weekday",existingPreferences:[],onPreferencesUpdated:N})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Weekend Handoff Times"}),(0,r.jsx)(i.m,{relationshipId:s.id,currentUserId:t.id,dayType:"weekend",existingPreferences:[],onPreferencesUpdated:N})]})]})]}),h&&(0,r.jsxs)("section",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-blue-800",children:"Your Preference Summary"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-blue-700 mb-2",children:"Day Preferences"}),h.dayPreferences.length>0?(0,r.jsx)("ul",{className:"space-y-1",children:h.dayPreferences.sort((e,t)=>e.priority-t.priority).slice(0,3).map((e,t)=>(0,r.jsxs)("li",{className:"text-blue-600",children:[t+1,". ",["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.day_of_week]]},e.id))}):(0,r.jsx)("p",{className:"text-gray-500 italic",children:"No preferences set"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-blue-700 mb-2",children:"Date Preferences"}),h.datePreferences.length>0?(0,r.jsx)("ul",{className:"space-y-1",children:h.datePreferences.sort((e,t)=>e.priority-t.priority).slice(0,3).map((e,t)=>(0,r.jsxs)("li",{className:"text-blue-600",children:[t+1,". ",new Date(e.date).toLocaleDateString()]},e.id))}):(0,r.jsx)("p",{className:"text-gray-500 italic",children:"No preferences set"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-blue-700 mb-2",children:"Handoff Times"}),h.handoffTimes.length>0?(0,r.jsx)("ul",{className:"space-y-1",children:h.handoffTimes.slice(0,3).map((e,t)=>(0,r.jsx)("li",{className:"text-blue-600",children:e.time},e.id))}):(0,r.jsx)("p",{className:"text-gray-500 italic",children:"No preferences set"})]})]})]})]})]})}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-yellow-800 font-semibold mb-2",children:"Authentication Required"}),(0,r.jsx)("p",{className:"text-yellow-600",children:"Please log in and ensure you have a co-parent relationship set up to manage preferences."})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,982,804,796,110,926,441,684,358],()=>t(3538)),_N_E=e.O()}]);