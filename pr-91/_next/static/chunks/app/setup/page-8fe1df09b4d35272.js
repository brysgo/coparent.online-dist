(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var a=t(5155),n=t(2115),s=t(4624),l=t(2085),i=t(9434);let o=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,r)=>{let{className:t,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:t})),ref:r,...c})});d.displayName="Button"},2085:(e,r,t)=>{"use strict";t.d(r,{F:()=>l});var a=t(2596);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=a.$,l=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return s(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:l,defaultVariants:i}=r,o=Object.keys(l).map(e=>{let r=null==t?void 0:t[e],a=null==i?void 0:i[e];if(null===r)return null;let s=n(r)||n(a);return l[e][s]}),d=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return s(e,o,null==r||null==(a=r.compoundVariants)?void 0:a.reduce((e,r)=>{let{class:t,className:a,...n}=r;return Object.entries(n).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...i,...d}[r]):({...i,...d})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},2523:(e,r,t)=>{"use strict";t.d(r,{p:()=>l});var a=t(5155),n=t(2115),s=t(9434);let l=n.forwardRef((e,r)=>{let{className:t,type:n,...l}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white placeholder:text-gray-400 focus-visible:ring-blue-500",t),ref:r,...l})});l.displayName="Input"},4624:(e,r,t)=>{"use strict";t.d(r,{DX:()=>l});var a=t(2115);function n(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}var s=t(5155),l=function(e){let r=function(e){let r=a.forwardRef((e,r)=>{let{children:t,...s}=e;if(a.isValidElement(t)){var l;let e,i,o=(l=t,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),d=function(e,r){let t={...r};for(let a in r){let n=e[a],s=r[a];/^on[A-Z]/.test(a)?n&&s?t[a]=(...e)=>{let r=s(...e);return n(...e),r}:n&&(t[a]=n):"style"===a?t[a]={...n,...s}:"className"===a&&(t[a]=[n,s].filter(Boolean).join(" "))}return{...e,...t}}(s,t.props);return t.type!==a.Fragment&&(d.ref=r?function(...e){return r=>{let t=!1,a=e.map(e=>{let a=n(e,r);return t||"function"!=typeof a||(t=!0),a});if(t)return()=>{for(let r=0;r<a.length;r++){let t=a[r];"function"==typeof t?t():n(e[r],null)}}}}(r,o):o),a.cloneElement(t,d)}return a.Children.count(t)>1?a.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=a.forwardRef((e,t)=>{let{children:n,...l}=e,i=a.Children.toArray(n),d=i.find(o);if(d){let e=d.props.children,n=i.map(r=>r!==d?r:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(r,{...l,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,s.jsx)(r,{...l,ref:t,children:n})});return t.displayName=`${e}.Slot`,t}("Slot"),i=Symbol("radix.slottable");function o(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}},5057:(e,r,t)=>{"use strict";t.d(r,{J:()=>l});var a=t(5155),n=t(2115),s=t(9434);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("label",{ref:r,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70","text-gray-700",t),...n})});l.displayName="Label"},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},6488:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var a=t(5155),n=t(2115),s=t(6083),l=t(5695),i=t(2099),o=t(6695),d=t(285),c=t(2523),u=t(5057),f=t(8539),m=t(2085),p=t(9434);let h=(0,m.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),x=n.forwardRef((e,r)=>{let{className:t,variant:n,...s}=e;return(0,a.jsx)("div",{ref:r,role:"alert",className:(0,p.cn)(h({variant:n}),t),...s})});x.displayName="Alert";let g=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,p.cn)("text-sm [&_p]:leading-relaxed",t),...n})});function v(){let{user:e,isLoading:r,isAuthenticated:t}=(0,s.A)(),m=(0,l.useRouter)(),p=(0,i.k)(),[h,v]=(0,n.useState)("welcome"),[y,b]=(0,n.useState)(!1),[j,N]=(0,n.useState)(null),[w,C]=(0,n.useState)({full_name:"",phone:"",address:""}),[k,R]=(0,n.useState)({email:"",message:""});(0,n.useEffect)(()=>{if(!r&&!t)return void m.push("/login");t&&e&&C({full_name:e.full_name||"",phone:e.phone||"",address:e.address||""})},[r,t,e,m]);let _=async()=>{if(e)try{b(!0),N(null);let{error:r}=await p.from("users").update({full_name:w.full_name,phone:w.phone,address:w.address}).eq("id",e.id);if(r)throw r;v("coparent")}catch(e){N(e.message)}finally{b(!1)}},S=async()=>{if(e)try{b(!0),N(null);let{error:r}=await p.from("co_parent_invitations").insert({inviter_id:e.id,invitee_email:k.email,message:k.message||"Hi! ".concat(e.full_name||e.email," has invited you to connect on CoParent.Online to help coordinate our co-parenting. Please sign up to get started!"),status:"pending"});if(r)throw r;m.push("/dashboard?setup=invitation-sent")}catch(e){N(e.message)}finally{b(!1)}};return r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-6",children:["welcome"===h&&(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"text-center",children:(0,a.jsx)(o.ZB,{className:"text-2xl",children:"Complete Your Account Setup"})}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Welcome! Let's finish setting up your account so you can start coordinating with your co-parent."}),(0,a.jsxs)("div",{className:"space-y-3 text-sm text-left bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"font-medium text-blue-900",children:"We'll help you:"}),(0,a.jsxs)("ul",{className:"space-y-1 text-blue-800",children:[(0,a.jsx)("li",{children:"• Update your profile information"}),(0,a.jsx)("li",{children:"• Connect with your co-parent"}),(0,a.jsx)("li",{children:"• Set up shared schedules and preferences"})]})]})]}),(0,a.jsx)(d.$,{onClick:()=>v("profile"),className:"w-full",children:"Get Started"})]})]}),"profile"===h&&(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Update Your Profile"})}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[j&&(0,a.jsx)(x,{variant:"destructive",children:(0,a.jsx)(g,{children:j})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"full_name",children:"Full Name"}),(0,a.jsx)(c.p,{id:"full_name",value:w.full_name,onChange:e=>C(r=>({...r,full_name:e.target.value})),placeholder:"Your full name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"phone",children:"Phone Number (Optional)"}),(0,a.jsx)(c.p,{id:"phone",value:w.phone,onChange:e=>C(r=>({...r,phone:e.target.value})),placeholder:"Your phone number"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"address",children:"Address (Optional)"}),(0,a.jsx)(f.T,{id:"address",value:w.address,onChange:e=>C(r=>({...r,address:e.target.value})),placeholder:"Your address",rows:3})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:()=>v("welcome"),className:"flex-1",children:"Back"}),(0,a.jsx)(d.$,{onClick:_,disabled:y||!w.full_name,className:"flex-1",children:y?"Saving...":"Continue"})]})]})]}),"coparent"===h&&(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Connect with Your Co-Parent"})}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[j&&(0,a.jsx)(x,{variant:"destructive",children:(0,a.jsx)(g,{children:j})}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Invite your co-parent to join CoParent.Online so you can coordinate schedules, share information, and manage your co-parenting together."}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"coparent_email",children:"Co-Parent's Email"}),(0,a.jsx)(c.p,{id:"coparent_email",type:"email",value:k.email,onChange:e=>R(r=>({...r,email:e.target.value})),placeholder:"their.email@example.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"message",children:"Personal Message (Optional)"}),(0,a.jsx)(f.T,{id:"message",value:k.message,onChange:e=>R(r=>({...r,message:e.target.value})),placeholder:"Hi! I'd like to connect with you on CoParent.Online to help coordinate our co-parenting...",rows:3})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:()=>v("profile"),className:"flex-1",children:"Back"}),(0,a.jsx)(d.$,{onClick:S,disabled:y||!k.email,className:"flex-1",children:y?"Sending...":"Send Invitation"})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(d.$,{variant:"link",onClick:()=>{v("skip-complete")},children:"Skip for now"})})]})]}),"skip-complete"===h&&(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"text-center",children:(0,a.jsx)(o.ZB,{className:"text-2xl",children:"Setup Almost Complete"})}),(0,a.jsxs)(o.Wu,{className:"space-y-4 text-center",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"You can explore the platform and set up your co-parent connection later from the dashboard."}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg text-left text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-yellow-900 mb-2",children:"Note:"}),(0,a.jsx)("p",{className:"text-yellow-800",children:"Some features like shared calendars and co-parent coordination will be available once you connect with your co-parent."})]}),(0,a.jsx)(d.$,{onClick:()=>{m.push("/dashboard?setup=skipped")},className:"w-full",children:"Continue to Dashboard"})]})]})]})})}g.displayName="AlertDescription",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("h5",{ref:r,className:(0,p.cn)("mb-1 font-medium leading-none tracking-tight",t),...n})}).displayName="AlertTitle"},6695:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i});var a=t(5155),n=t(2115),s=t(9434);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});l.displayName="Card";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},8087:(e,r,t)=>{Promise.resolve().then(t.bind(t,6488))},8539:(e,r,t)=>{"use strict";t.d(r,{T:()=>l});var a=t(5155),n=t(2115),s=t(9434);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white placeholder:text-gray-400 focus-visible:ring-blue-500",t),ref:r,...n})});l.displayName="Textarea"},9434:(e,r,t)=>{"use strict";t.d(r,{Fd:()=>o,Uj:()=>l,cn:()=>s,wz:()=>i});var a=t(2596),n=t(9688);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,a.$)(r))}function l(e){let r=e.startsWith("/")?"".concat("/pr-91").concat(e):e;window.location.href=r}function i(e,r){return e===r||("/"===r?"/"===e:e.startsWith(r+"/")||e===r)}function o(e){return e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:"/".concat(e):"/"}}},e=>{var r=r=>e(e.s=r);e.O(0,[277,982,83,441,684,358],()=>r(8087)),_N_E=e.O()}]);