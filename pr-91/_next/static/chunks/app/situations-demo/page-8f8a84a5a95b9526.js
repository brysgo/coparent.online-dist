(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{2217:(e,s,r)=>{Promise.resolve().then(r.bind(r,6601))},6601:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(5155),n=r(2115),a=r(8417),i=r(285),l=r(6695);function c(e){let{relationshipId:s,currentUserId:r,involvedParties:c,onEmergencyCreated:d}=e,[o,m]=(0,n.useState)(!1),[u,x]=(0,n.useState)(null),[h,g]=(0,n.useState)(""),[p,y]=(0,n.useState)(""),[j,b]=(0,n.useState)(3),[v,f]=(0,n.useState)({name:"",address:""}),[N,w]=(0,n.useState)(!1),[k,C]=(0,n.useState)(!1),D=[{id:"school-pickup",title:"Emergency School Pickup",description:"Child needs immediate pickup from school",icon:"\uD83C\uDFEB",urgencyLevel:3,emergencyType:"pickup",requiresPickup:!0,defaultLocation:"School"},{id:"injury",title:"Child Injury",description:"Child has been injured and needs attention",icon:"\uD83E\uDE79",urgencyLevel:4,emergencyType:"injury",requiresMedicalAttention:!0,defaultLocation:"Current location"},{id:"illness",title:"Child Illness",description:"Child is sick and needs care",icon:"\uD83E\uDD12",urgencyLevel:3,emergencyType:"illness",requiresPickup:!0,defaultLocation:"School/Daycare"},{id:"behavioral",title:"Behavioral Emergency",description:"Child is having a behavioral crisis",icon:"\uD83D\uDE30",urgencyLevel:3,emergencyType:"behavioral",requiresPickup:!0,defaultLocation:"Current location"},{id:"custom",title:"Other Emergency",description:"Custom emergency situation",icon:"\uD83D\uDEA8",urgencyLevel:3,emergencyType:"other",requiresPickup:!1,defaultLocation:""}],S=e=>{var s;x(e.id),g(e.title),y(e.description),b(e.urgencyLevel),w(e.requiresPickup),C(null!=(s=e.requiresMedicalAttention)&&s),f(s=>({...s,name:e.defaultLocation}))},E=async()=>{if(!h.trim()||!p.trim())return void alert("Please provide a title and description for the emergency");m(!0);try{let e=D.find(e=>e.id===u),t={relationshipId:s,type:"emergency",title:h,description:p,priority:"urgent",status:"created",createdBy:r,assignedTo:c.filter(e=>e!==r),involvedParties:c,deadline:new Date(Date.now()+72e5),metadata:{emergencyType:(null==e?void 0:e.emergencyType)||"other",location:v.name||v.address?{name:v.name,address:v.address}:void 0,urgencyLevel:j,requiresPickup:N,requiresMedicalAttention:k,estimatedResolutionTime:j>=4?30:60}},n=await a.N.createEmergency(t);d&&d(n),x(null),g(""),y(""),b(3),f({name:"",address:""}),w(!1),C(!1)}catch(e){console.error("Error creating emergency:",e),alert("Failed to create emergency. Please try again.")}finally{m(!1)}};return(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDEA8"}),(0,t.jsx)("span",{children:"Create Emergency Situation"})]})}),(0,t.jsxs)(l.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Quick Emergency Types:"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:D.map(e=>(0,t.jsxs)(i.$,{variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2 ".concat(u===e.id?"ring-2 ring-red-500 bg-red-50":"hover:bg-gray-50"),onClick:()=>S(e),children:[(0,t.jsx)("span",{className:"text-3xl",children:e.icon}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.title}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:e.description})]})]},e.id))})]}),u&&(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Title *"}),(0,t.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Brief description of the emergency"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Description *"}),(0,t.jsx)("textarea",{value:p,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:3,placeholder:"Detailed description of what happened and what's needed"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Name"}),(0,t.jsx)("input",{type:"text",value:v.name,onChange:e=>f(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., Riverside Elementary School"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",value:v.address,onChange:e=>f(s=>({...s,address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Full address for directions"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Urgency Level: ",j,"/5"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"range",min:"1",max:"5",value:j,onChange:e=>b(Number(e.target.value)),className:"w-full"}),(0,t.jsxs)("div",{className:"px-3 py-2 rounded-md text-center text-sm font-medium ".concat((e=>{switch(e){case 5:return"bg-red-600 text-white";case 4:return"bg-red-500 text-white";case 3:return"bg-orange-500 text-white";case 2:return"bg-yellow-500 text-white";case 1:return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}})(j)),children:["Level ",j,": ",(e=>{switch(e){case 5:return"Life-threatening - Call 911";case 4:return"Serious injury/illness";case 3:return"Moderate urgency";case 2:return"Minor urgency";case 1:return"Low urgency";default:return"Unknown"}})(j)]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:N,onChange:e=>w(e.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:"Requires immediate pickup"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:k,onChange:e=>C(e.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:"Requires medical attention"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,t.jsx)(i.$,{variant:"outline",onClick:()=>x(null),disabled:o,children:"Cancel"}),(0,t.jsx)(i.$,{onClick:E,disabled:o||!h.trim()||!p.trim(),className:"bg-red-600 hover:bg-red-700 text-white",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Emergency..."]}):"\uD83D\uDEA8 Create Emergency"})]})]}),isGuestMode&&(0,t.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,t.jsx)("span",{className:"font-medium",children:"Demo Mode:"})," Creating an emergency will demonstrate the immediate notification system and quick response features."]})}),(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"Emergency Guidelines:"}),(0,t.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Level 5:"})," Life-threatening - Call 911 immediately"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Level 4:"})," Serious injury/illness - Seek immediate medical care"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Level 3:"})," Moderate urgency - Coordinate pickup/care within hours"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Level 2:"})," Minor urgency - Address within the day"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Level 1:"})," Low urgency - Can wait but needs attention"]})]})]})]})]})}var d=r(7122);let o=()=>[{id:"demo-1",type:"emergency",title:"Child has fever",description:"Temperature 101.5\xb0F, needs monitoring",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),parent_id:"demo-parent",child_id:"demo-child",urgency:"high"},{id:"demo-2",type:"emergency",title:"Missed pickup",description:"Other parent did not show up for scheduled pickup",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),parent_id:"demo-parent",child_id:"demo-child",urgency:"medium"}];function m(){let[e,s]=(0,n.useState)([]),[r,a]=(0,n.useState)(new Map),[m,u]=(0,n.useState)(!1),x=o().filter(e=>"emergency"===e.type),h=(e,r)=>{a(s=>{let t=new Map(s),n=t.get(e)||[];return t.set(e,[...n,r]),t}),"handled"===r.responseType&&s(s=>s.map(s=>s.id===e?{...s,status:"resolved"}:s))},g=()=>{let r=x[0];r&&!e.find(e=>e.id===r.id)&&s(e=>[r,...e])};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDEA8 Emergency Situation Management Demo"}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:"Experience how co-parents can quickly create and respond to emergency situations"})]}),(0,t.jsxs)(l.Zp,{className:"mb-8",children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Demo Controls"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsx)(i.$,{onClick:()=>u(!m),className:"bg-red-600 hover:bg-red-700 text-white",children:m?"Hide Creator":"\uD83D\uDEA8 Create Emergency"}),(0,t.jsx)(i.$,{onClick:g,variant:"outline",children:"\uD83D\uDCF1 Load Demo Emergency"}),(0,t.jsx)(i.$,{onClick:()=>{s([]),a(new Map)},variant:"outline",children:"\uD83D\uDDD1️ Clear All"})]})})]}),m&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(c,{relationshipId:"demo-relationship",currentUserId:"parent-1",involvedParties:["parent-1","parent-2"],onEmergencyCreated:e=>{s(s=>[e,...s]),u(!1)},isGuestMode:!0})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900",children:["Active Emergency Situations (",e.length,")"]}),0===e.length?(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.Wu,{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDD98"}),(0,t.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No Active Emergencies"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Create a new emergency or load a demo to see the emergency response system in action."}),(0,t.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,t.jsx)(i.$,{onClick:()=>u(!0),className:"bg-red-600 hover:bg-red-700 text-white",children:"\uD83D\uDEA8 Create Emergency"}),(0,t.jsx)(i.$,{onClick:g,variant:"outline",children:"\uD83D\uDCF1 Load Demo"})]})]})}):(0,t.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)(d.b,{situation:e,currentUserId:"parent-2",onResponseSent:s=>h(e.id,s),isGuestMode:!0}),r.get(e.id)&&r.get(e.id).length>0&&(0,t.jsxs)(l.Zp,{className:"mt-4 border-l-4 border-l-green-500",children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-lg",children:"Quick Responses"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:r.get(e.id).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-green-600 text-sm",children:"✓"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"font-medium text-green-800",children:["acknowledged"===e.responseType&&"✓ Acknowledged","on_way"===e.responseType&&"\uD83D\uDE97 On My Way","handled"===e.responseType&&"✅ Handled","need_help"===e.responseType&&"\uD83C\uDD98 Need Help","cant_help"===e.responseType&&"❌ Can't Help"]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),e.message&&(0,t.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.message}),e.estimatedArrival&&(0,t.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:["ETA: ",e.estimatedArrival.toLocaleTimeString()]})]})]},s))})})]})]},e.id))})]}),(0,t.jsxs)(l.Zp,{className:"mt-8",children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"About This Demo"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"prose prose-sm max-w-none",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Emergency Situation Management Features:"}),(0,t.jsxs)("ul",{className:"space-y-1 text-gray-700",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Quick Emergency Creation:"})," Pre-built templates for common emergencies"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Urgency Levels:"})," 1-5 scale with automatic escalation rules"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Immediate Notifications:"})," Real-time alerts to all involved parties"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Quick Response System:"})," One-tap responses with status updates"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Location Tracking:"})," GPS integration for emergency coordination"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Automatic Escalation:"})," Escalates to emergency contacts if unacknowledged"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Medical Integration:"})," Flags for medical attention and 911 recommendations"]})]}),(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 mt-4",children:"Try These Scenarios:"}),(0,t.jsxs)("ul",{className:"space-y-1 text-gray-700",children:[(0,t.jsx)("li",{children:'1. Create a "Child Injury" emergency and respond with "On My Way"'}),(0,t.jsx)("li",{children:'2. Create a "School Pickup" emergency and add location details'}),(0,t.jsx)("li",{children:"3. Try different urgency levels to see how the interface adapts"}),(0,t.jsx)("li",{children:"4. Use quick responses to see real-time status updates"})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,t.jsx)("strong",{children:"Demo Mode:"})," This is a demonstration of the emergency management system. In a real implementation, notifications would be sent via push notifications, SMS, and phone calls based on urgency level."]})})]})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[277,122,441,684,358],()=>s(2217)),_N_E=e.O()}]);