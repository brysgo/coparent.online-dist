(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var r=a(5155),s=a(2115),n=a(9708),i=a(2085),l=a(9434);let c=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:o=!1,...d}=e,p=o?n.DX:"button";return(0,r.jsx)(p,{className:(0,l.cn)(c({variant:s,size:i,className:a})),ref:t,...d})});o.displayName="Button"},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var r=a(5155),s=a(2115),n=a(9434);let i=s.forwardRef((e,t)=>{let{className:a,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white placeholder:text-gray-400 focus-visible:ring-blue-500",a),ref:t,...i})});i.displayName="Input"},4053:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(5155),s=a(2115),n=a(3715),i=a(5695),l=a(3559),c=a(9434);let o=l.bL,d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.B8,{ref:t,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});d.displayName=l.B8.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.l9,{ref:t,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});p.displayName=l.l9.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.UC,{ref:t,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});m.displayName=l.UC.displayName;var u=a(6695),h=a(285),x=a(2523),g=a(5057),_=a(8539),f=a(9409),v=a(4944),y=a(4514);class j{createProposal(e,t,a,r){let s=this.validateProposal(a.proposed_changes,r);if(!s.is_valid)throw Error("Invalid proposal: ".concat(s.errors.join(", ")));let n=this.calculateProposalImpact(a.proposed_changes,r);return{id:this.generateProposalId(),relationship_id:e,proposed_by:t,status:"pending",type:a.type,title:a.title,description:a.description,reason:a.reason,proposed_changes:a.proposed_changes,impact_analysis:n,approval_status:{},created_at:new Date().toISOString(),updated_at:new Date().toISOString(),expires_at:a.expires_in_days?new Date(Date.now()+24*a.expires_in_days*36e5).toISOString():void 0}}validateProposal(e,t){let a=[],r=[];if(void 0!==e.time_ratio){(e.time_ratio<10||e.time_ratio>90)&&a.push("Time split must be between 10% and 90% to ensure reasonable arrangements for both parents");let s=t.relationship.time_ratio||50,n=Math.abs(e.time_ratio-s);n>=30&&r.push("Large time split change (".concat(n.toFixed(1),"%) may significantly impact both parents' schedules"))}if(void 0!==e.preference_ratio&&(e.preference_ratio<20||e.preference_ratio>80)&&r.push("Extreme preference ratios may lead to unfair scheduling outcomes"),e.schedule_modifications){var s,n,i;let t=e.schedule_modifications;if(((null==(s=t.add_events)?void 0:s.length)||0)+((null==(n=t.remove_events)?void 0:n.length)||0)+((null==(i=t.modify_events)?void 0:i.length)||0)>20&&r.push("Large number of schedule changes may be difficult to manage"),t.add_events){for(let e of t.add_events)if(e.start_time&&e.end_time&&e.parent_id||a.push("All new events must have start time, end time, and parent assignment"),e.start_time&&e.end_time){let t=new Date(e.start_time),s=new Date(e.end_time);s<=t&&a.push("Event end time must be after start time"),(s.getTime()-t.getTime())/36e5>168&&r.push("Events longer than a week may be unusual")}}}if(e.date_range){let t=new Date(e.date_range.start),s=new Date(e.date_range.end);s<=t&&a.push("Date range end must be after start"),(s.getTime()-t.getTime())/864e5>365&&r.push("Adjustments affecting more than a year may be difficult to track")}return{is_valid:0===a.length,errors:a,warnings:r}}calculateProposalImpact(e,t){let a=this.metricsCalculator.calculateTimeSplit(t.events,t.relationship),r=this.metricsCalculator.calculatePreferenceSkew(t.events,t.dayPreferences,t.datePreferences,t.relationship),s=this.metricsCalculator.calculateFairnessScore(a,r,t.relationship),n={...t.relationship},i=[...t.events];if(void 0!==e.time_ratio&&(n.time_ratio=e.time_ratio),void 0!==e.preference_ratio&&(n.preference_ratio=e.preference_ratio),e.schedule_modifications){let t=e.schedule_modifications;t.remove_events&&(i=i.filter(e=>!t.remove_events.includes(e.id))),t.modify_events&&(i=i.map(e=>{let a=t.modify_events.find(t=>t.event_id===e.id);return a?{...e,...a.changes}:e})),t.add_events&&(i=[...i,...t.add_events.map((e,t)=>({id:"temp_event_".concat(t,"_").concat(Date.now()),schedule_id:"temp_schedule",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),title:e.title||"New Event",description:e.description,location:e.location,priority:e.priority,event_type:e.event_type||"custody",...e}))])}let l=i,c=t.events;if(e.date_range){let a=new Date(e.date_range.start),r=new Date(e.date_range.end);l=i.filter(e=>{let t=new Date(e.start_time);return t>=a&&t<=r}),c=t.events.filter(e=>{let t=new Date(e.start_time);return t>=a&&t<=r})}let o=this.metricsCalculator.calculateTimeSplit(l,n),d=this.metricsCalculator.calculatePreferenceSkew(l,t.dayPreferences,t.datePreferences,n),p=this.metricsCalculator.calculateFairnessScore(o,d,n),m=a,u=r,h=s;e.date_range&&(m=this.metricsCalculator.calculateTimeSplit(c,t.relationship),u=this.metricsCalculator.calculatePreferenceSkew(c,t.dayPreferences,t.datePreferences,t.relationship),h=this.metricsCalculator.calculateFairnessScore(m,u,t.relationship));let x=[],g=[],_=o.parentAPercentage-m.parentAPercentage,f=d.parentASkew-u.parentASkew,v=d.parentBSkew-u.parentBSkew,y=p-h;return Math.abs(_)>15&&x.push("Significant time split change: ".concat(_>0?"+":"").concat(_.toFixed(1),"% for Parent A")),(f<-20||v<-20)&&x.push("One parent's preference satisfaction significantly decreases"),y<-10&&(x.push("Overall fairness score decreases significantly"),g.push("Consider modifications to balance the negative impact on fairness")),y>10&&g.push("This adjustment improves overall fairness"),Math.abs(f-v)>30&&g.push("Consider balancing preference satisfaction changes between parents"),{current_metrics:{time_split:{parent_a_percentage:m.parentAPercentage,parent_b_percentage:m.parentBPercentage,total_hours:m.totalHours},preference_satisfaction:{parent_a_score:u.parentASkew,parent_b_score:u.parentBSkew,total_violations:u.totalPreferenceViolations},fairness_score:h},projected_metrics:{time_split:{parent_a_percentage:o.parentAPercentage,parent_b_percentage:o.parentBPercentage,total_hours:o.totalHours},preference_satisfaction:{parent_a_score:d.parentASkew,parent_b_score:d.parentBSkew,total_violations:d.totalPreferenceViolations},fairness_score:p},changes:{time_split_change:_,parent_a_preference_change:f,parent_b_preference_change:v,fairness_score_change:y},warnings:x,recommendations:g}}respondToProposal(e,t,a,r){if("pending"!==e.status)throw Error("Can only respond to pending proposals");let s={...e},n=new Date().toISOString(),i=t===r.parent_a_id,l=t===r.parent_b_id;if(!i&&!l)throw Error("Only parents in the relationship can respond to proposals");return"approve"===a?(i?(s.approval_status.parent_a_approved=!0,s.approval_status.parent_a_approved_at=n):(s.approval_status.parent_b_approved=!0,s.approval_status.parent_b_approved_at=n),s.approval_status.parent_a_approved&&s.approval_status.parent_b_approved&&(s.status="approved")):s.status="rejected",s.updated_at=n,s}withdrawProposal(e,t){if(e.proposed_by!==t)throw Error("Only the proposer can withdraw a proposal");if("pending"!==e.status)throw Error("Can only withdraw pending proposals");return{...e,status:"withdrawn",updated_at:new Date().toISOString()}}processExpiredProposals(e){let t=new Date;return e.map(e=>"pending"===e.status&&e.expires_at&&new Date(e.expires_at)<t?{...e,status:"expired",updated_at:t.toISOString()}:e)}generateProposalHistory(e,t){let a=e.length,r=e.filter(e=>"approved"===e.status).length,s=e.filter(e=>"rejected"===e.status).length,n=e.filter(e=>"pending"===e.status).length,i=e.filter(e=>"approved"===e.status&&e.approval_status.parent_a_approved_at&&e.approval_status.parent_b_approved_at),l=0;i.length>0&&(l=i.reduce((e,t)=>{let a=new Date(t.created_at);return e+(new Date(Math.max(new Date(t.approval_status.parent_a_approved_at).getTime(),new Date(t.approval_status.parent_b_approved_at).getTime())).getTime()-a.getTime())},0)/(24*i.length*36e5));let c=Object.entries(e.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{})).reduce((e,t)=>{let[a,r]=t;return r>e.count?{type:a,count:r}:e},{type:"time_split",count:0}).type,o=e.flatMap(e=>{let a=[{proposal_id:e.id,action:"created",actor:e.proposed_by,timestamp:e.created_at}];return e.approval_status.parent_a_approved_at&&a.push({proposal_id:e.id,action:"approved",actor:t.parent_a_id,timestamp:e.approval_status.parent_a_approved_at}),e.approval_status.parent_b_approved_at&&a.push({proposal_id:e.id,action:"approved",actor:t.parent_b_id,timestamp:e.approval_status.parent_b_approved_at}),"rejected"===e.status&&a.push({proposal_id:e.id,action:"rejected",actor:e.proposed_by,timestamp:e.updated_at}),"withdrawn"===e.status&&a.push({proposal_id:e.id,action:"withdrawn",actor:e.proposed_by,timestamp:e.updated_at}),a}).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,20);return{proposals:e,summary:{total_proposals:a,approved_proposals:r,rejected_proposals:s,pending_proposals:n,average_approval_time_days:Math.round(100*l)/100,most_common_type:c},recent_activity:o}}generateProposalId(){let e=Date.now(),t=Math.random().toString(36).substring(2,8);return"proposal_".concat(e,"_").concat(t)}constructor(){this.metricsCalculator=new y.C}}function b(e){var t;let{currentData:a,currentUserId:n,parentAName:i="Parent A",parentBName:l="Parent B",onProposalCreated:c,className:o=""}=e,[d]=(0,s.useState)(()=>new j),[p,m]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[P,S]=(0,s.useState)([]),[C,k]=(0,s.useState)([]),[D,T]=(0,s.useState)({type:"time_split",title:"",description:"",reason:"",expires_in_days:7}),A=(e,t)=>{T(a=>({...a,[e]:t})),(P.length>0||C.length>0)&&(S([]),k([]),N(null),b(!1))},F=()=>{if(!D.title.trim()||!D.reason.trim())return void S(["Title and reason are required"]);try{let e={};"time_split"===D.type&&void 0!==D.time_ratio&&(e.time_ratio=D.time_ratio),"preference_ratio"===D.type&&void 0!==D.preference_ratio&&(e.preference_ratio=D.preference_ratio),D.date_range_start&&D.date_range_end&&(e.date_range={start:D.date_range_start,end:D.date_range_end});let t=d.validateProposal(e,a);if(S(t.errors),k(t.warnings),t.is_valid){let t=d.calculateProposalImpact(e,a);N(t),b(!0)}}catch(e){S([e instanceof Error?e.message:"Failed to generate preview"])}},B=async()=>{if(!w)return void F();m(!0);try{let e={};"time_split"===D.type&&void 0!==D.time_ratio&&(e.time_ratio=D.time_ratio),"preference_ratio"===D.type&&void 0!==D.preference_ratio&&(e.preference_ratio=D.preference_ratio),D.date_range_start&&D.date_range_end&&(e.date_range={start:D.date_range_start,end:D.date_range_end});let t=d.createProposal(a.relationship.id,n,{type:D.type,title:D.title,description:D.description,reason:D.reason,proposed_changes:e,expires_in_days:D.expires_in_days},a);c&&c(t),T({type:"time_split",title:"",description:"",reason:"",expires_in_days:7}),b(!1),N(null),S([]),k([])}catch(e){S([e instanceof Error?e.message:"Failed to create proposal"])}finally{m(!1)}},M=e=>5>Math.abs(e)?"text-green-600":15>Math.abs(e)?"text-yellow-600":"text-red-600",R=e=>e>0?"↗":e<0?"↘":"→";return(0,r.jsxs)("div",{className:"space-y-6 ".concat(o),children:[(0,r.jsxs)(u.Zp,{children:[(0,r.jsxs)(u.aR,{children:[(0,r.jsx)(u.ZB,{children:"Create Adjustment Proposal"}),(0,r.jsx)(u.BT,{children:"Propose changes to your custody arrangement that require both parents' approval"})]}),(0,r.jsxs)(u.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.J,{htmlFor:"type",children:"Proposal Type"}),(0,r.jsxs)(f.l6,{value:D.type,onValueChange:e=>A("type",e),children:[(0,r.jsx)(f.bq,{children:(0,r.jsx)(f.yv,{placeholder:"Select proposal type"})}),(0,r.jsxs)(f.gC,{children:[(0,r.jsx)(f.eb,{value:"time_split",children:"Time Split Adjustment"}),(0,r.jsx)(f.eb,{value:"preference_ratio",children:"Preference Priority Adjustment"}),(0,r.jsx)(f.eb,{value:"schedule_change",children:"Schedule Modification"}),(0,r.jsx)(f.eb,{value:"holiday_adjustment",children:"Holiday Arrangement"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.J,{htmlFor:"title",children:"Title *"}),(0,r.jsx)(x.p,{id:"title",value:D.title,onChange:e=>A("title",e.target.value),placeholder:"Brief description of the proposed change",maxLength:100})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.J,{htmlFor:"description",children:"Description"}),(0,r.jsx)(_.T,{id:"description",value:D.description,onChange:e=>A("description",e.target.value),placeholder:"Detailed explanation of what you're proposing...",rows:3,maxLength:500})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.J,{htmlFor:"reason",children:"Reason *"}),(0,r.jsx)(_.T,{id:"reason",value:D.reason,onChange:e=>A("reason",e.target.value),placeholder:"Why is this change needed? (e.g., work schedule change, child's needs, etc.)",rows:2,maxLength:300})]}),"time_split"===D.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(g.J,{htmlFor:"time_ratio",children:["New Time Split for ",i," (%)"]}),(0,r.jsx)(x.p,{id:"time_ratio",type:"number",min:"10",max:"90",value:D.time_ratio||"",onChange:e=>A("time_ratio",parseInt(e.target.value)||0),placeholder:"Current: ".concat(a.relationship.time_ratio||50,"%")}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Must be between 10% and 90% to ensure fair arrangements for both parents"})]}),"preference_ratio"===D.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(g.J,{htmlFor:"preference_ratio",children:["New Preference Weight for ",i," (%)"]}),(0,r.jsx)(x.p,{id:"preference_ratio",type:"number",min:"20",max:"80",value:D.preference_ratio||"",onChange:e=>A("preference_ratio",parseInt(e.target.value)||0),placeholder:"Current: ".concat(a.relationship.preference_ratio||50,"%")}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:["Higher values give ",i," more priority when scheduling conflicts arise"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.J,{htmlFor:"date_range_start",children:"Start Date (Optional)"}),(0,r.jsx)(x.p,{id:"date_range_start",type:"date",value:D.date_range_start||"",onChange:e=>A("date_range_start",e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.J,{htmlFor:"date_range_end",children:"End Date (Optional)"}),(0,r.jsx)(x.p,{id:"date_range_end",type:"date",value:D.date_range_end||"",onChange:e=>A("date_range_end",e.target.value),min:D.date_range_start})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.J,{htmlFor:"expires_in_days",children:"Expires In (Days)"}),(0,r.jsxs)(f.l6,{value:(null==(t=D.expires_in_days)?void 0:t.toString())||"7",onValueChange:e=>A("expires_in_days",parseInt(e)),children:[(0,r.jsx)(f.bq,{children:(0,r.jsx)(f.yv,{})}),(0,r.jsxs)(f.gC,{children:[(0,r.jsx)(f.eb,{value:"3",children:"3 days"}),(0,r.jsx)(f.eb,{value:"7",children:"1 week"}),(0,r.jsx)(f.eb,{value:"14",children:"2 weeks"}),(0,r.jsx)(f.eb,{value:"30",children:"1 month"})]})]})]}),P.length>0&&(0,r.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:[(0,r.jsx)("h4",{className:"font-medium text-red-800 mb-1",children:"Validation Errors:"}),(0,r.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:P.map((e,t)=>(0,r.jsxs)("li",{children:["• ",e]},t))})]}),C.length>0&&(0,r.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,r.jsx)("h4",{className:"font-medium text-yellow-800 mb-1",children:"Warnings:"}),(0,r.jsx)("ul",{className:"text-sm text-yellow-700 space-y-1",children:C.map((e,t)=>(0,r.jsxs)("li",{children:["• ",e]},t))})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(h.$,{onClick:F,variant:"outline",disabled:!D.title.trim()||!D.reason.trim(),children:"Preview Impact"}),(0,r.jsx)(h.$,{onClick:B,disabled:p||!y||P.length>0,children:p?"Creating...":"Create Proposal"})]})]})]}),y&&w&&(0,r.jsxs)(u.Zp,{children:[(0,r.jsxs)(u.aR,{children:[(0,r.jsx)(u.ZB,{children:"Impact Analysis"}),(0,r.jsx)(u.BT,{children:"Projected changes if this proposal is approved"})]}),(0,r.jsxs)(u.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Time Split Impact"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:i}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm",children:[w.current_metrics.time_split.parent_a_percentage.toFixed(1),"%"]}),(0,r.jsx)("span",{className:"text-sm ".concat(M(w.changes.time_split_change)),children:R(w.changes.time_split_change)}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[w.projected_metrics.time_split.parent_a_percentage.toFixed(1),"%"]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:l}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm",children:[w.current_metrics.time_split.parent_b_percentage.toFixed(1),"%"]}),(0,r.jsx)("span",{className:"text-sm ".concat(M(-w.changes.time_split_change)),children:R(-w.changes.time_split_change)}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[w.projected_metrics.time_split.parent_b_percentage.toFixed(1),"%"]})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Preference Satisfaction"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:i}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm",children:[w.current_metrics.preference_satisfaction.parent_a_score.toFixed(1),"%"]}),(0,r.jsx)("span",{className:"text-sm ".concat(M(w.changes.parent_a_preference_change)),children:R(w.changes.parent_a_preference_change)}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[w.projected_metrics.preference_satisfaction.parent_a_score.toFixed(1),"%"]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:l}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm",children:[w.current_metrics.preference_satisfaction.parent_b_score.toFixed(1),"%"]}),(0,r.jsx)("span",{className:"text-sm ".concat(M(w.changes.parent_b_preference_change)),children:R(w.changes.parent_b_preference_change)}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[w.projected_metrics.preference_satisfaction.parent_b_score.toFixed(1),"%"]})]})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Overall Fairness Impact"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-lg font-semibold",children:w.current_metrics.fairness_score.toFixed(1)}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Current"})]}),(0,r.jsx)("div",{className:"text-lg ".concat(M(w.changes.fairness_score_change)),children:R(w.changes.fairness_score_change)}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-lg font-semibold",children:w.projected_metrics.fairness_score.toFixed(1)}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Projected"})]})]}),(0,r.jsxs)("div",{className:"text-sm font-medium ".concat(M(w.changes.fairness_score_change)),children:[w.changes.fairness_score_change>0?"+":"",w.changes.fairness_score_change.toFixed(1)," points"]})]}),(0,r.jsx)(v.k,{value:w.projected_metrics.fairness_score,className:"w-full"})]}),w.warnings.length>0&&(0,r.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,r.jsx)("h4",{className:"font-medium text-yellow-800 mb-1",children:"Impact Warnings:"}),(0,r.jsx)("ul",{className:"text-sm text-yellow-700 space-y-1",children:w.warnings.map((e,t)=>(0,r.jsxs)("li",{children:["• ",e]},t))})]}),w.recommendations.length>0&&(0,r.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-800 mb-1",children:"Recommendations:"}),(0,r.jsx)("ul",{className:"text-sm text-blue-700 space-y-1",children:w.recommendations.map((e,t)=>(0,r.jsxs)("li",{children:["• ",e]},t))})]})]})]})]})}let w=(0,a(2085).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function N(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,c.cn)(w({variant:a}),t),...s})}function P(e){let{proposals:t,relationship:a,currentUserId:n,parentAName:i="Parent A",parentBName:l="Parent B",onProposalAction:c,className:o=""}=e,[d]=(0,s.useState)(()=>new j),[p,m]=(0,s.useState)("all"),[x,g]=(0,s.useState)("all"),[_,v]=(0,s.useState)(null),y=(0,s.useMemo)(()=>d.processExpiredProposals(t),[t,d]),b=(0,s.useMemo)(()=>d.generateProposalHistory(y,a),[y,a,d]),w=(0,s.useMemo)(()=>y.filter(e=>("all"===p||e.status===p)&&("all"===x||e.type===x)),[y,p,x]),P=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"withdrawn":default:return"bg-gray-100 text-gray-800";case"expired":return"bg-orange-100 text-orange-800"}},S=e=>{switch(e){case"time_split":return"bg-blue-100 text-blue-800";case"preference_ratio":return"bg-purple-100 text-purple-800";case"schedule_change":return"bg-indigo-100 text-indigo-800";case"holiday_adjustment":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}},C=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=e=>{let t=new Date,a=new Date(e),r=t.getTime()-a.getTime(),s=Math.floor(r/864e5),n=Math.floor(r/36e5),i=Math.floor(r/6e4);return s>0?"".concat(s,"d ago"):n>0?"".concat(n,"h ago"):i>0?"".concat(i,"m ago"):"Just now"},D=e=>{if("pending"!==e.status||e.proposed_by===n)return!1;let t=n===a.parent_a_id,r=n===a.parent_b_id;return(!t||!e.approval_status.parent_a_approved)&&(!r||!e.approval_status.parent_b_approved)&&(t||r)},T=e=>"pending"===e.status&&e.proposed_by===n,A=(e,t)=>{c&&c(e,t)},F=e=>e===a.parent_a_id?i:e===a.parent_b_id?l:"Unknown",B=e=>{let t=e.approval_status.parent_a_approved,a=e.approval_status.parent_b_approved;return t&&a?"Both parents approved":t?"".concat(i," approved"):a?"".concat(l," approved"):"No approvals yet"};return(0,r.jsxs)("div",{className:"space-y-6 ".concat(o),children:[(0,r.jsxs)(u.Zp,{children:[(0,r.jsxs)(u.aR,{children:[(0,r.jsx)(u.ZB,{children:"Proposal History Summary"}),(0,r.jsx)(u.BT,{children:"Track all adjustment proposals and their outcomes"})]}),(0,r.jsxs)(u.Wu,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:b.summary.total_proposals}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Proposals"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:b.summary.approved_proposals}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Approved"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:b.summary.pending_proposals}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Pending"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[b.summary.average_approval_time_days.toFixed(1),"d"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Avg. Approval Time"})]})]}),b.summary.most_common_type&&(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Most common type: ",(0,r.jsx)("span",{className:"font-medium capitalize",children:b.summary.most_common_type.replace("_"," ")})]})})]})]}),(0,r.jsxs)(u.Zp,{children:[(0,r.jsx)(u.aR,{children:(0,r.jsx)(u.ZB,{children:"Filter Proposals"})}),(0,r.jsx)(u.Wu,{children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,r.jsxs)(f.l6,{value:p,onValueChange:e=>m(e),children:[(0,r.jsx)(f.bq,{className:"w-40",children:(0,r.jsx)(f.yv,{})}),(0,r.jsxs)(f.gC,{children:[(0,r.jsx)(f.eb,{value:"all",children:"All Statuses"}),(0,r.jsx)(f.eb,{value:"pending",children:"Pending"}),(0,r.jsx)(f.eb,{value:"approved",children:"Approved"}),(0,r.jsx)(f.eb,{value:"rejected",children:"Rejected"}),(0,r.jsx)(f.eb,{value:"withdrawn",children:"Withdrawn"}),(0,r.jsx)(f.eb,{value:"expired",children:"Expired"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Type"}),(0,r.jsxs)(f.l6,{value:x,onValueChange:e=>g(e),children:[(0,r.jsx)(f.bq,{className:"w-52",children:(0,r.jsx)(f.yv,{})}),(0,r.jsxs)(f.gC,{children:[(0,r.jsx)(f.eb,{value:"all",children:"All Types"}),(0,r.jsx)(f.eb,{value:"time_split",children:"Time Split"}),(0,r.jsx)(f.eb,{value:"preference_ratio",children:"Preference Ratio"}),(0,r.jsx)(f.eb,{value:"schedule_change",children:"Schedule Change"}),(0,r.jsx)(f.eb,{value:"holiday_adjustment",children:"Holiday Adjustment"})]})]})]})]})})]}),(0,r.jsx)("div",{className:"space-y-4",children:0===w.length?(0,r.jsx)(u.Zp,{children:(0,r.jsx)(u.Wu,{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No proposals match the current filters"})})}):w.map(e=>{var t,a,s;return(0,r.jsxs)(u.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,r.jsx)(u.aR,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(u.ZB,{className:"text-lg",children:e.title}),(0,r.jsxs)(u.BT,{children:["Proposed by ",F(e.proposed_by)," • ",k(e.created_at)]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(N,{className:S(e.type),children:e.type.replace("_"," ")}),(0,r.jsx)(N,{className:P(e.status),children:e.status})]})]})}),(0,r.jsxs)(u.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:"Reason"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:e.reason})]}),e.description&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:"Description"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:e.description})]}),"pending"===e.status&&(0,r.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md",children:[(0,r.jsx)("p",{className:"text-sm text-gray-700",children:B(e)}),e.expires_at&&(0,r.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Expires: ",C(e.expires_at)]})]}),_===e.id&&(0,r.jsxs)("div",{className:"space-y-3 border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Impact Analysis"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lg font-semibold",children:e.impact_analysis.current_metrics.fairness_score.toFixed(1)}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Current Fairness"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-lg font-semibold ".concat(e.impact_analysis.changes.fairness_score_change>=0?"text-green-600":"text-red-600"),children:[e.impact_analysis.changes.fairness_score_change>0?"+":"",e.impact_analysis.changes.fairness_score_change.toFixed(1)]}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Change"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lg font-semibold",children:e.impact_analysis.projected_metrics.fairness_score.toFixed(1)}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Projected Fairness"})]})]}),e.impact_analysis.warnings.length>0&&(0,r.jsxs)("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Warnings:"}),(0,r.jsx)("ul",{className:"text-xs text-yellow-700 space-y-1",children:e.impact_analysis.warnings.map((e,t)=>(0,r.jsxs)("li",{children:["• ",e]},t))})]}),e.impact_analysis.recommendations.length>0&&(0,r.jsxs)("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-blue-800 mb-1",children:"Recommendations:"}),(0,r.jsx)("ul",{className:"text-xs text-blue-700 space-y-1",children:e.impact_analysis.recommendations.map((e,t)=>(0,r.jsxs)("li",{children:["• ",e]},t))})]}),(0,r.jsxs)("div",{className:"p-2 bg-gray-50 rounded",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-gray-800 mb-1",children:"Proposed Changes:"}),(0,r.jsxs)("div",{className:"text-xs text-gray-700 space-y-1",children:[e.proposed_changes.time_ratio&&(0,r.jsxs)("div",{children:["Time split for ",i,": ",e.proposed_changes.time_ratio,"%"]}),e.proposed_changes.preference_ratio&&(0,r.jsxs)("div",{children:["Preference weight for ",i,": ",e.proposed_changes.preference_ratio,"%"]}),e.proposed_changes.date_range&&(0,r.jsxs)("div",{children:["Date range: ",e.proposed_changes.date_range.start," to ",e.proposed_changes.date_range.end]}),e.proposed_changes.schedule_modifications&&(0,r.jsxs)("div",{children:["Schedule modifications:",(null==(t=e.proposed_changes.schedule_modifications.add_events)?void 0:t.length)||0," additions,",(null==(a=e.proposed_changes.schedule_modifications.modify_events)?void 0:a.length)||0," modifications,",(null==(s=e.proposed_changes.schedule_modifications.remove_events)?void 0:s.length)||0," removals"]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>v(_===e.id?null:e.id),children:_===e.id?"Hide Details":"Show Details"}),(D(e)||T(e))&&(0,r.jsxs)("div",{className:"flex space-x-2",children:[D(e)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.$,{size:"sm",onClick:()=>A(e,"approve"),className:"bg-green-600 hover:bg-green-700",children:"Approve"}),(0,r.jsx)(h.$,{size:"sm",variant:"outline",onClick:()=>A(e,"reject"),className:"border-red-300 text-red-700 hover:bg-red-50",children:"Reject"})]}),T(e)&&(0,r.jsx)(h.$,{size:"sm",variant:"outline",onClick:()=>A(e,"withdraw"),className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Withdraw"})]})]})]})]},e.id)})}),b.recent_activity.length>0&&(0,r.jsxs)(u.Zp,{children:[(0,r.jsxs)(u.aR,{children:[(0,r.jsx)(u.ZB,{children:"Recent Activity"}),(0,r.jsx)(u.BT,{children:"Latest actions on proposals"})]}),(0,r.jsx)(u.Wu,{children:(0,r.jsx)("div",{className:"space-y-3",children:b.recent_activity.slice(0,10).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("approved"===e.action?"bg-green-500":"rejected"===e.action?"bg-red-500":"withdrawn"===e.action?"bg-gray-500":"bg-blue-500")}),(0,r.jsxs)("span",{className:"text-sm text-gray-700",children:[F(e.actor)," ",e.action," a proposal"]})]}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:k(e.timestamp)})]},t))})})]})]})}let S={events:[],dayPreferences:[],datePreferences:[],relationship:{id:"rel-123",parent_a_id:"user-123",parent_b_id:"user-456",time_ratio:50,preference_ratio:50,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}};function C(){let{user:e,isLoading:t,isAuthenticated:a}=(0,n.As)(),l=(0,i.useRouter)(),[c]=(0,s.useState)(()=>new j),[u,h]=(0,s.useState)([]),[x]=(0,s.useState)("user-123");return((0,s.useEffect)(()=>{t||a||l.push("/login")},[t,a,l]),t)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Custody Adjustments"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Propose and negotiate changes to your custody arrangement with your co-parent."})]}),(0,r.jsxs)(o,{defaultValue:"create",className:"space-y-6",children:[(0,r.jsxs)(d,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(p,{value:"create",children:"Create Proposal"}),(0,r.jsx)(p,{value:"history",children:"Proposal History"})]}),(0,r.jsx)(m,{value:"create",className:"space-y-6",children:(0,r.jsx)(b,{currentData:S,currentUserId:x,parentAName:"You",parentBName:"Co-Parent",onProposalCreated:e=>{h(t=>[e,...t])}})}),(0,r.jsx)(m,{value:"history",className:"space-y-6",children:(0,r.jsx)(P,{proposals:u,relationship:S.relationship,currentUserId:x,parentAName:"You",parentBName:"Co-Parent",onProposalAction:(e,t)=>{try{let a;a="withdraw"===t?c.withdrawProposal(e,x):c.respondToProposal(e,x,t,S.relationship),h(t=>t.map(t=>t.id===e.id?a:t))}catch(e){console.error("Failed to process proposal action:",e)}}})})]})]})}):null}},4514:(e,t,a)=>{"use strict";a.d(t,{C:()=>r});class r{calculateTimeSplit(e,t,a){let r=(a?e.filter(e=>{let t=new Date(e.start_time);return t>=a.start&&t<=a.end}):e).filter(e=>"custody"===e.event_type||!e.event_type),s=0,n=0;r.forEach(e=>{let a=new Date(e.start_time),r=(new Date(e.end_time).getTime()-a.getTime())/36e5;e.parent_id===t.parent_a_id?s+=r:e.parent_id===t.parent_b_id&&(n+=r)});let i=s+n;return{parentAPercentage:Math.round(100*(i>0?s/i*100:50))/100,parentBPercentage:Math.round(100*(i>0?n/i*100:50))/100,totalHours:Math.round(100*i)/100,parentAHours:Math.round(100*s)/100,parentBHours:Math.round(100*n)/100}}calculatePreferenceSkew(e,t,a,r,s){let n=(s?e.filter(e=>{let t=new Date(e.start_time);return t>=s.start&&t<=s.end}):e).filter(e=>"custody"===e.event_type||!e.event_type),i=0,l=0,c=0,o=0;return n.forEach(e=>{let s=new Date(e.start_time),n=s.getDay(),d=s.toISOString().split("T")[0];e.parent_id===r.parent_a_id?(c++,this.isPreferenceViolation(e.parent_id,n,d,t,a)&&i++):e.parent_id===r.parent_b_id&&(o++,this.isPreferenceViolation(e.parent_id,n,d,t,a)&&l++)}),{parentASkew:Math.round(100*(c>0?(c-i)/c*100:100))/100,parentBSkew:Math.round(100*(o>0?(o-l)/o*100:100))/100,totalPreferenceViolations:i+l,parentAViolations:i,parentBViolations:l}}isPreferenceViolation(e,t,a,r,s){let n=s.find(t=>t.parent_id===e&&t.date===a);if(n)return n.priority>4;let i=r.find(a=>a.parent_id===e&&a.day_of_week===t);return!!i&&i.priority>4}calculateTrends(e,t,a,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"week",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:12,i=[],l=new Date;for(let c=n-1;c>=0;c--){let n=new Date(l),o=new Date(l);"week"===s?(n.setDate(l.getDate()-7*c),o.setDate(n.getDate()-7)):(n.setMonth(l.getMonth()-c),o.setMonth(n.getMonth()-1));let d=this.calculateTimeSplit(e,r,{start:o,end:n}),p=this.calculatePreferenceSkew(e,t,a,r,{start:o,end:n});i.push({date:n.toISOString().split("T")[0],timeSplit:d,preferenceSkew:p})}return i}generateExplanations(e,t,a){let r="Time split is calculated by totaling custody hours for each parent. Parent A has ".concat(e.parentAHours," hours (").concat(e.parentAPercentage,"%) and Parent B has ").concat(e.parentBHours," hours (").concat(e.parentBPercentage,"%) out of ").concat(e.totalHours," total custody hours."),s="Preference satisfaction is calculated by comparing scheduled custody time to each parent's stated preferences. Parent A gets their preferred times ".concat(t.parentASkew,"% of the time, while Parent B gets their preferred times ").concat(t.parentBSkew,"% of the time. Higher percentages indicate better preference satisfaction."),n=[],i=a.time_ratio||50,l=Math.abs(e.parentAPercentage-i);l>10&&n.push("Time split differs from ideal ratio by ".concat(l.toFixed(1),"%. Consider adjusting schedule to better match agreed-upon custody arrangement."));let c=Math.abs(t.parentASkew-t.parentBSkew);if(c>20){let e=t.parentASkew>t.parentBSkew?"Parent A":"Parent B";n.push("".concat(e," is getting their preferred times significantly more often (").concat(c.toFixed(1),"% difference). Consider redistributing preferred time slots for better balance."))}return t.totalPreferenceViolations>0&&n.push("There are ".concat(t.totalPreferenceViolations," preference violations. Review the schedule to minimize conflicts with stated preferences.")),0===n.length&&n.push("Current schedule appears well-balanced in terms of both time split and preference satisfaction."),{timeSplitCalculation:r,preferenceSkewCalculation:s,recommendations:n}}calculateFairnessScore(e,t,a){let r=a.time_ratio||50,s=Math.max(0,100-2*Math.abs(e.parentAPercentage-r)),n=100-Math.abs(t.parentASkew-t.parentBSkew),i=(t.parentASkew+t.parentBSkew)/2;return Math.round(100*(.4*s+.4*(.3*n+.7*i)+.2*Math.max(0,100-Math.min(40,5*t.totalPreferenceViolations))))/100}}},4944:(e,t,a)=>{"use strict";a.d(t,{k:()=>i});var r=a(5155),s=a(2115),n=a(9434);let i=s.forwardRef((e,t)=>{let{className:a,value:s=0,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-gray-200",a),...i,children:(0,r.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-300 ease-in-out",style:{width:"".concat(Math.min(100,Math.max(0,s)),"%")}})})});i.displayName="Progress"},5057:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var r=a(5155),s=a(2115),n=a(9434);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("label",{ref:t,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70","text-gray-700",a),...s})});i.displayName="Label"},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>l});var r=a(5155),s=a(2115),n=a(9434);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},6988:(e,t,a)=>{Promise.resolve().then(a.bind(a,4053))},8539:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var r=a(5155),s=a(2115),n=a(9434);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white placeholder:text-gray-400 focus-visible:ring-blue-500",a),ref:t,...s})});i.displayName="Textarea"},9409:(e,t,a)=>{"use strict";a.d(t,{bq:()=>l,eb:()=>d,gC:()=>o,l6:()=>i,yv:()=>c});var r=a(5155),s=a(2115),n=a(9434);let i=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsx)("select",{className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white focus:ring-blue-500",a),ref:t,...i,children:s})});i.displayName="Select";let l=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white focus:ring-blue-500",a),...i,children:s})});l.displayName="SelectTrigger";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("span",{ref:t,className:(0,n.cn)("block truncate",a),...s})});c.displayName="SelectValue";let o=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md","border-gray-200 bg-white shadow-lg",a),...i,children:s})});o.displayName="SelectContent";let d=s.forwardRef((e,t)=>{let{className:a,children:s,value:i,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50","hover:bg-gray-100 focus:bg-gray-100",a),"data-value":i,...l,children:s})});d.displayName="SelectItem"},9434:(e,t,a)=>{"use strict";a.d(t,{Fd:()=>c,Uj:()=>i,cn:()=>n,wz:()=>l});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function i(e){let t=e.startsWith("/")?"".concat("/pr-68").concat(e):e;window.location.href=t}function l(e,t){return e===t||("/"===t?"/"===e:e.startsWith(t+"/")||e===t)}function c(e){return e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:"/".concat(e):"/"}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,982,458,715,441,684,358],()=>t(6988)),_N_E=e.O()}]);