(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3790,7343],{2217:(e,t,s)=>{Promise.resolve().then(s.bind(s,6601))},6601:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(5155),i=s(2115),r=s(8417),n=s(285),l=s(6695),c=s(4899);function d(e){let{relationshipId:t,currentUserId:s,involvedParties:d,onEmergencyCreated:o,isGuestMode:m=!1}=e,[h,u]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),[x,y]=(0,i.useState)(""),[j,v]=(0,i.useState)(""),[b,f]=(0,i.useState)(3),[w,N]=(0,i.useState)({name:"",address:""}),[k,C]=(0,i.useState)(!1),[T,D]=(0,i.useState)(!1),S=[{id:"school-pickup",title:"Emergency School Pickup",description:"Child needs immediate pickup from school",icon:"\uD83C\uDFEB",urgencyLevel:3,emergencyType:"pickup",requiresPickup:!0,defaultLocation:"School"},{id:"injury",title:"Child Injury",description:"Child has been injured and needs attention",icon:"\uD83E\uDE79",urgencyLevel:4,emergencyType:"injury",requiresMedicalAttention:!0,defaultLocation:"Current location"},{id:"illness",title:"Child Illness",description:"Child is sick and needs care",icon:"\uD83E\uDD12",urgencyLevel:3,emergencyType:"illness",requiresPickup:!0,defaultLocation:"School/Daycare"},{id:"behavioral",title:"Behavioral Emergency",description:"Child is having a behavioral crisis",icon:"\uD83D\uDE30",urgencyLevel:3,emergencyType:"behavioral",requiresPickup:!0,defaultLocation:"Current location"},{id:"custom",title:"Other Emergency",description:"Custom emergency situation",icon:"\uD83D\uDEA8",urgencyLevel:3,emergencyType:"other",requiresPickup:!1,defaultLocation:""}],E=e=>{var t;g(e.id),y(e.title),v(e.description),f(e.urgencyLevel),C(e.requiresPickup),D(null!=(t=e.requiresMedicalAttention)&&t),N(t=>({...t,name:e.defaultLocation}))},L=async()=>{if(!x.trim()||!j.trim())return void alert("Please provide a title and description for the emergency");u(!0);try{let e=S.find(e=>e.id===p),a={relationshipId:t,type:"emergency",title:x,description:j,priority:"urgent",status:"created",createdBy:s,assignedTo:d.filter(e=>e!==s),involvedParties:d,deadline:new Date(Date.now()+72e5),metadata:{emergencyType:(null==e?void 0:e.emergencyType)||"other",location:w.name||w.address?{name:w.name,address:w.address}:void 0,urgencyLevel:b,requiresPickup:k,requiresMedicalAttention:T,estimatedResolutionTime:b>=4?30:60}};if(m){c.B.saveGuestInteraction("demo_action",{type:"emergency_created",title:x,urgencyLevel:b,emergencyType:(null==e?void 0:e.emergencyType)||"other",source:"emergency_creator"});let t={id:"emergency_".concat(Date.now()),createdAt:new Date,updates:[],escalations:[],...a};o&&o(t)}else{let e=await r.N.createEmergency(a);o&&o(e)}g(null),y(""),v(""),f(3),N({name:"",address:""}),C(!1),D(!1)}catch(e){console.error("Error creating emergency:",e),alert("Failed to create emergency. Please try again.")}finally{u(!1)}};return(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDEA8"}),(0,a.jsx)("span",{children:"Create Emergency Situation"})]})}),(0,a.jsxs)(l.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Quick Emergency Types:"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:S.map(e=>(0,a.jsxs)(n.$,{variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2 ".concat(p===e.id?"ring-2 ring-red-500 bg-red-50":"hover:bg-gray-50"),onClick:()=>E(e),children:[(0,a.jsx)("span",{className:"text-3xl",children:e.icon}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:e.description})]})]},e.id))})]}),p&&(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Title *"}),(0,a.jsx)("input",{type:"text",value:x,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Brief description of the emergency"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Description *"}),(0,a.jsx)("textarea",{value:j,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:3,placeholder:"Detailed description of what happened and what's needed"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Name"}),(0,a.jsx)("input",{type:"text",value:w.name,onChange:e=>N(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., Riverside Elementary School"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,a.jsx)("input",{type:"text",value:w.address,onChange:e=>N(t=>({...t,address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Full address for directions"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Urgency Level: ",b,"/5"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"range",min:"1",max:"5",value:b,onChange:e=>f(Number(e.target.value)),className:"w-full"}),(0,a.jsxs)("div",{className:"px-3 py-2 rounded-md text-center text-sm font-medium ".concat((e=>{switch(e){case 5:return"bg-red-600 text-white";case 4:return"bg-red-500 text-white";case 3:return"bg-orange-500 text-white";case 2:return"bg-yellow-500 text-white";case 1:return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}})(b)),children:["Level ",b,": ",(e=>{switch(e){case 5:return"Life-threatening - Call 911";case 4:return"Serious injury/illness";case 3:return"Moderate urgency";case 2:return"Minor urgency";case 1:return"Low urgency";default:return"Unknown"}})(b)]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:k,onChange:e=>C(e.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Requires immediate pickup"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:T,onChange:e=>D(e.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Requires medical attention"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>g(null),disabled:h,children:"Cancel"}),(0,a.jsx)(n.$,{onClick:L,disabled:h||!x.trim()||!j.trim(),className:"bg-red-600 hover:bg-red-700 text-white",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Emergency..."]}):"\uD83D\uDEA8 Create Emergency"})]})]}),m&&(0,a.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,a.jsx)("span",{className:"font-medium",children:"Demo Mode:"})," Creating an emergency will demonstrate the immediate notification system and quick response features."]})}),(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"Emergency Guidelines:"}),(0,a.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Level 5:"})," Life-threatening - Call 911 immediately"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Level 4:"})," Serious injury/illness - Seek immediate medical care"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Level 3:"})," Moderate urgency - Coordinate pickup/care within hours"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Level 2:"})," Minor urgency - Address within the day"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Level 1:"})," Low urgency - Can wait but needs attention"]})]})]})]})]})}var o=s(7122),m=s(7343);function h(){let[e,t]=(0,i.useState)([]),[s,r]=(0,i.useState)(new Map),[c,h]=(0,i.useState)(!1),u=(0,m.generateDemoSituations)().filter(e=>"emergency"===e.type),p=(e,s)=>{r(t=>{let a=new Map(t),i=a.get(e)||[];return a.set(e,[...i,s]),a}),"handled"===s.responseType&&t(t=>t.map(t=>t.id===e?{...t,status:"resolved"}:t))},g=()=>{let s=u[0];s&&!e.find(e=>e.id===s.id)&&t(e=>[s,...e])};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDEA8 Emergency Situation Management Demo"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Experience how co-parents can quickly create and respond to emergency situations"})]}),(0,a.jsxs)(l.Zp,{className:"mb-8",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Demo Controls"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)(n.$,{onClick:()=>h(!c),className:"bg-red-600 hover:bg-red-700 text-white",children:c?"Hide Creator":"\uD83D\uDEA8 Create Emergency"}),(0,a.jsx)(n.$,{onClick:g,variant:"outline",children:"\uD83D\uDCF1 Load Demo Emergency"}),(0,a.jsx)(n.$,{onClick:()=>{t([]),r(new Map)},variant:"outline",children:"\uD83D\uDDD1️ Clear All"})]})})]}),c&&(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(d,{relationshipId:"demo-relationship",currentUserId:"parent-1",involvedParties:["parent-1","parent-2"],onEmergencyCreated:e=>{t(t=>[e,...t]),h(!1)},isGuestMode:!0})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900",children:["Active Emergency Situations (",e.length,")"]}),0===e.length?(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDD98"}),(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No Active Emergencies"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Create a new emergency or load a demo to see the emergency response system in action."}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)(n.$,{onClick:()=>h(!0),className:"bg-red-600 hover:bg-red-700 text-white",children:"\uD83D\uDEA8 Create Emergency"}),(0,a.jsx)(n.$,{onClick:g,variant:"outline",children:"\uD83D\uDCF1 Load Demo"})]})]})}):(0,a.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)(o.b,{situation:e,currentUserId:"parent-2",onResponseSent:t=>p(e.id,t),isGuestMode:!0}),s.get(e.id)&&s.get(e.id).length>0&&(0,a.jsxs)(l.Zp,{className:"mt-4 border-l-4 border-l-green-500",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-lg",children:"Quick Responses"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:s.get(e.id).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-green-600 text-sm",children:"✓"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"font-medium text-green-800",children:["acknowledged"===e.responseType&&"✓ Acknowledged","on_way"===e.responseType&&"\uD83D\uDE97 On My Way","handled"===e.responseType&&"✅ Handled","need_help"===e.responseType&&"\uD83C\uDD98 Need Help","cant_help"===e.responseType&&"❌ Can't Help"]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),e.message&&(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.message}),e.estimatedArrival&&(0,a.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:["ETA: ",e.estimatedArrival.toLocaleTimeString()]})]})]},t))})})]})]},e.id))})]}),(0,a.jsxs)(l.Zp,{className:"mt-8",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"About This Demo"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"prose prose-sm max-w-none",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Emergency Situation Management Features:"}),(0,a.jsxs)("ul",{className:"space-y-1 text-gray-700",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Quick Emergency Creation:"})," Pre-built templates for common emergencies"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Urgency Levels:"})," 1-5 scale with automatic escalation rules"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Immediate Notifications:"})," Real-time alerts to all involved parties"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Quick Response System:"})," One-tap responses with status updates"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Location Tracking:"})," GPS integration for emergency coordination"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Automatic Escalation:"})," Escalates to emergency contacts if unacknowledged"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Medical Integration:"})," Flags for medical attention and 911 recommendations"]})]}),(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 mt-4",children:"Try These Scenarios:"}),(0,a.jsxs)("ul",{className:"space-y-1 text-gray-700",children:[(0,a.jsx)("li",{children:'1. Create a "Child Injury" emergency and respond with "On My Way"'}),(0,a.jsx)("li",{children:'2. Create a "School Pickup" emergency and add location details'}),(0,a.jsx)("li",{children:"3. Try different urgency levels to see how the interface adapts"}),(0,a.jsx)("li",{children:"4. Use quick responses to see real-time status updates"})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,a.jsx)("strong",{children:"Demo Mode:"})," This is a demonstration of the emergency management system. In a real implementation, notifications would be sent via push notifications, SMS, and phone calls based on urgency level."]})})]})})]})]})})}},7343:(e,t,s)=>{"use strict";function a(){let e=new Date,t=new Date(e.getTime()-864e5),s=new Date(e.getTime()-1728e5),a=new Date(e.getTime()-2592e5);return[{id:"sit-001",relationshipId:"rel-demo",type:"emergency",title:"Emma fell at school - needs pickup",description:"Emma scraped her knee during recess and the nurse wants her picked up early. She's okay but needs some comfort and a bandage change.",priority:"urgent",status:"in-progress",createdBy:"parent-1",assignedTo:["parent-2"],involvedParties:["parent-1","parent-2"],createdAt:new Date(e.getTime()-72e5),deadline:new Date(e.getTime()+36e5),metadata:{emergencyType:"injury",location:{name:"Riverside Elementary School",address:"123 School St, Riverside, CA 92501"},urgencyLevel:2,estimatedResolutionTime:30,requiresPickup:!0,requiresMedicalAttention:!1},updates:[],escalations:[],relatedChildren:["child-emma"]},{id:"sit-002",relationshipId:"rel-demo",type:"logistics",title:"Soccer cleats forgotten at mom's house",description:"Jake has soccer practice today at 4 PM but his cleats are at mom's house. Need to coordinate getting them to dad's place or the field.",priority:"high",status:"acknowledged",createdBy:"parent-2",assignedTo:["parent-1"],involvedParties:["parent-1","parent-2"],createdAt:t,deadline:new Date(e.getTime()+108e5),metadata:{logisticsType:"forgotten_item",items:[{name:"Soccer cleats",description:"Blue Nike cleats, size 4",currentLocation:"Mom's house",neededBy:new Date(e.getTime()+108e5)}],coordination:{pickupLocation:"456 Oak Ave, Riverside, CA 92501",dropoffLocation:"Riverside Soccer Complex",proposedTime:new Date(e.getTime()+72e5),flexibility:30,specialInstructions:"Practice starts at 4 PM sharp"}},updates:[],escalations:[],relatedChildren:["child-jake"]},{id:"sit-003",relationshipId:"rel-demo",type:"behavioral",title:"Emma had a meltdown about homework",description:"Emma got very frustrated with her math homework and had a big emotional reaction. Looking for consistent approach between both homes.",priority:"medium",status:"created",createdBy:"parent-1",assignedTo:["parent-2"],involvedParties:["parent-1","parent-2"],createdAt:s,metadata:{behaviorType:"emotional",incident:{description:"Emma threw her pencil and started crying when she couldn't solve a multiplication problem",location:"Home - kitchen table",severity:2,triggers:["homework difficulty","fatigue"]},childId:"child-emma",parentalResponse:{immediate:"Took a 10-minute break, then worked through the problem together",planned:"Consider breaking homework into smaller chunks",consistency:"discussing"},followUp:{checkInDates:[new Date(e.getTime()+864e5)],progressNotes:[],effectiveness:"stable"},privacyLevel:"both_parents"},updates:[],escalations:[],relatedChildren:["child-emma"]},{id:"sit-004",relationshipId:"rel-demo",type:"logistics",title:"Schedule change request for next weekend",description:"Dad has a work conference next Saturday and needs to swap weekend custody. Proposing to take the following weekend instead.",priority:"medium",status:"created",createdBy:"parent-2",assignedTo:["parent-1"],involvedParties:["parent-1","parent-2"],createdAt:a,deadline:new Date(e.getTime()+432e6),metadata:{logisticsType:"schedule_change",scheduleChange:{originalEventId:"event-weekend-1",proposedChanges:{date:new Date(e.getTime()+12096e5)},impact:{affectedEvents:["event-weekend-1"],conflictsWith:[],preferenceImpact:3}}},updates:[],escalations:[],relatedChildren:["child-emma","child-jake"]},{id:"sit-005",relationshipId:"rel-demo",type:"logistics",title:"Piano recital coordination",description:"Emma's piano recital is next Thursday at 7 PM. Both parents want to attend. Need to coordinate seating and post-recital celebration.",priority:"low",status:"resolved",createdBy:"parent-1",assignedTo:["parent-2"],involvedParties:["parent-1","parent-2"],createdAt:new Date(e.getTime()-6048e5),resolvedAt:new Date(e.getTime()-1728e5),metadata:{logisticsType:"coordination",coordination:{pickupLocation:"School auditorium",dropoffLocation:"Ice cream shop",proposedTime:new Date(e.getTime()+6048e5+72e5),flexibility:60,specialInstructions:"Both parents will sit together, then celebrate at ice cream shop"}},updates:[],escalations:[],relatedChildren:["child-emma"]},{id:"sit-006",relationshipId:"rel-demo",type:"behavioral",title:"Jake's bedtime routine consistency",description:"Jake has been having trouble falling asleep at both houses. Need to align bedtime routines and screen time limits.",priority:"medium",status:"in-progress",createdBy:"parent-2",assignedTo:["parent-1"],involvedParties:["parent-1","parent-2"],createdAt:new Date(e.getTime()-432e6),metadata:{behaviorType:"developmental",incident:{description:"Jake stays awake until 10 PM or later, affecting his mood the next day",location:"Both homes",severity:3,triggers:["screen time","inconsistent routine"]},childId:"child-jake",parentalResponse:{immediate:"Implementing 8:30 PM bedtime with 30-min wind-down",planned:"No screens after 7 PM, consistent routine at both houses",consistency:"aligned"},followUp:{checkInDates:[new Date(e.getTime()+1728e5),new Date(e.getTime()+6048e5)],progressNotes:["First week showing improvement"],effectiveness:"improving"},privacyLevel:"both_parents"},updates:[],escalations:[],relatedChildren:["child-jake"]}]}s.d(t,{generateDemoSituations:()=>a})}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,1101,7122,8441,1684,7358],()=>t(2217)),_N_E=e.O()}]);