(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var a=t(5155),s=t(2115),n=t(4624),i=t(2085),l=t(9434);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:t})),ref:r,...c})});d.displayName="Button"},1418:(e,r,t)=>{"use strict";t.d(r,{x:()=>n});var a=t(5155),s=t(2115);class n extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){var t,a;console.error("Navigation Error Boundary caught an error:",e,r),null==(t=(a=this.props).onError)||t.call(a,e,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,a.jsx)("div",{className:"flex items-center justify-center p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.498 0L4.316 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,a.jsx)("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Navigation temporarily unavailable"}),(0,a.jsx)("button",{onClick:this.handleRetry,className:"text-xs text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200 underline ml-2",children:"Retry"})]})}):this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}}},1499:(e,r,t)=>{"use strict";t.d(r,{Header:()=>v});var a=t(5155),s=t(2115),n=t(3715),i=t(285),l=t(6874),o=t.n(l),d=t(5695),c=t(9434);function u(e){let{items:r,className:t=""}=e,n=(0,d.usePathname)(),i=(0,s.useMemo)(()=>{if(r)return r;let e=n.split("/").filter(Boolean),t=[{label:"Home",href:"/"}],a="";return e.forEach(e=>{a+="/".concat(e);let r=e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");t.push({label:r,href:(0,c.Fd)(a)})}),t},[n,r]);return i.length<=2?null:(0,a.jsx)("nav",{"aria-label":"Breadcrumb",className:"flex ".concat(t),children:(0,a.jsx)("ol",{className:"flex items-center space-x-2",children:i.map((e,r)=>(0,a.jsxs)("li",{className:"flex items-center",children:[r>0&&(0,a.jsx)("svg",{className:"flex-shrink-0 h-4 w-4 text-gray-400 mx-2",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M5.555 17.776l8-16 .894.448-8 16-.894-.448z"})}),r===i.length-1?(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400","aria-current":"page",children:e.label}):(0,a.jsx)(o(),{href:e.href,className:"text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",title:"Navigate to ".concat(e.label),children:e.label})]},e.href))})})}var h=t(1418);function m(e){let{className:r="",placeholder:t="Search...",onClose:n}=e,[i,l]=(0,s.useState)(""),[o,u]=(0,s.useState)(!1),[m,g]=(0,s.useState)(-1),[x,p]=(0,s.useState)(null),f=(0,s.useRef)(null),y=(0,d.useRouter)(),v=[{label:"Dashboard",href:"/dashboard",description:"Main dashboard overview",category:"Navigation"},{label:"Calendar",href:"/calendar",description:"View and manage schedules",category:"Navigation"},{label:"Situations",href:"/situations",description:"Manage co-parenting situations",category:"Navigation"},{label:"Expenses",href:"/expenses",description:"Track and split shared expenses between co-parents",category:"Navigation"},{label:"Inventory",href:"/inventory",description:"Track belongings and equipment across households",category:"Navigation"},{label:"Inventory Integrations",href:"/inventory-integrations",description:"Event and situation inventory demos",category:"Navigation"},{label:"Day Preferences",href:"/preferences/days",description:"Set your day preferences",category:"Preferences"},{label:"Date Preferences",href:"/preferences/dates",description:"Set your date preferences",category:"Preferences"},{label:"Handoff Times",href:"/preferences/handoff-times",description:"Configure handoff times",category:"Preferences"},{label:"Demo",href:"/onboarding",description:"Try the platform demo",category:"Navigation"},{label:"App Preview",href:"/app-preview",description:"Preview app features",category:"Navigation"}].map(e=>({...e,href:(0,c.Fd)(e.href)})),b=i.trim()?v.filter(e=>{var r,t;return e.label.toLowerCase().includes(i.toLowerCase())||(null==(r=e.description)?void 0:r.toLowerCase().includes(i.toLowerCase()))||(null==(t=e.category)?void 0:t.toLowerCase().includes(i.toLowerCase()))}):[];(0,s.useEffect)(()=>{let e=e=>{if(x&&("Escape"===e.key||"Backspace"===e.key||"Delete"===e.key)&&p(null),(e.metaKey||e.ctrlKey)&&"k"===e.key){var r;e.preventDefault(),u(!0),p(null),null==(r=f.current)||r.focus()}if("Escape"===e.key&&(u(!1),l(""),g(-1),p(null),null==n||n()),o&&b.length>0&&("ArrowDown"===e.key&&(e.preventDefault(),g(e=>(e+1)%b.length),p(null)),"ArrowUp"===e.key&&(e.preventDefault(),g(e=>e<=0?b.length-1:e-1),p(null)),"Enter"===e.key)){e.preventDefault();let r=m>=0?m:0;b.length>0&&r<b.length&&j(b[r].href)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,b,m,n,x]);let j=e=>{try{let r=(0,c.Fd)(e);y.push(r),u(!1),l(""),g(-1),p(null),null==n||n()}catch(e){console.error("Navigation error:",e),p("Navigation failed. Please try again.")}},k=e=>{j(e)};return(0,a.jsx)(h.x,{children:o?(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>u(!1),children:(0,a.jsx)("div",{className:"flex items-start justify-center pt-20",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg mx-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("input",{ref:f,type:"text",value:i,onChange:e=>{l(e.target.value),g(-1),p(null)},placeholder:t,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),x&&(0,a.jsx)("div",{className:"mt-3 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.498 0L4.316 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,a.jsx)("span",{className:"text-sm text-red-700 dark:text-red-300",children:x}),(0,a.jsx)("button",{onClick:()=>p(null),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200 underline ml-2",children:"Dismiss"})]})})]}),b.length>0&&(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 max-h-64 overflow-y-auto",children:b.map((e,r)=>(0,a.jsx)("button",{onClick:()=>k(e.href),className:"w-full text-left px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ".concat(r===m?"bg-gray-100 dark:bg-gray-700":""),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.label}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description})]}),e.category&&(0,a.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-600 px-2 py-1 rounded",children:e.category})]})},e.href))}),i&&0===b.length&&(0,a.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 p-4 text-center text-gray-500 dark:text-gray-400",children:['No results found for "',i,'"']}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 px-4 py-2 text-xs text-gray-500 dark:text-gray-400",children:(0,a.jsx)("span",{children:"Navigate with ↑↓, select with ↵, close with Esc"})})]})})}):(0,a.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center px-3 py-2 text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors ".concat(r),"aria-label":"Search",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t,(0,a.jsx)("kbd",{className:"ml-2 text-xs text-gray-400 dark:text-gray-500 font-mono",children:"⌘K"})]})})}var g=t(4899),x=t(2215);let p=[{path:"/preferences",title:"Set Preferences",description:"Prioritize your life areas",icon:"\uD83C\uDFAF"},{path:"/situations",title:"Manage Situations",description:"Handle emergencies & coordination",icon:"\uD83D\uDEA8"},{path:"/calendar",title:"Calendar & Scheduling",description:"Coordinate schedules",icon:"\uD83D\uDCC5"},{path:"/expenses",title:"Track Expenses",description:"Manage shared costs",icon:"\uD83D\uDCB0"},{path:"/inventory",title:"Shared Inventory",description:"Track items & locations",icon:"\uD83D\uDCE6"}];function f(e){let{className:r=""}=e,t=(0,d.usePathname)(),{isGuest:l,isAuthenticated:u,user:h}=(0,n.As)(),[m,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)(new Set),[b,j]=(0,s.useState)(!1);if(!l)return null;(0,s.useEffect)(()=>{var e,r;let t=g.B.getSessionAnalytics(),a=g.B.getGuestData(),s=new Set;(null==a||null==(e=a.preferences)?void 0:e.days)&&Array.isArray(a.preferences.days)&&a.preferences.days.length>0&&s.add("/preferences"),(null==a?void 0:a.situations)&&Array.isArray(a.situations)&&a.situations.length>0&&s.add("/situations"),((null==(r=t.interactions)?void 0:r.filter(e=>{var r,t;return e.type.includes("calendar")||(null==(t=e.data)||null==(r=t.action)?void 0:r.includes("calendar"))}))||[]).length>3&&s.add("/calendar"),(null==a?void 0:a.sharedExpenses)&&Array.isArray(a.sharedExpenses)&&a.sharedExpenses.length>0&&s.add("/expenses"),(null==a?void 0:a.inventoryItems)&&Array.isArray(a.inventoryItems)&&a.inventoryItems.length>0&&s.add("/inventory"),v(s)},[t]);let k=p.findIndex(e=>e.path===t),N=k>=0?p[k]:null,w=k>=0&&k<p.length-1?p[k+1]:null,S=y.size,_=S/p.length*100,C=e=>{g.B.saveGuestInteraction("demo_action",{action:"wizard_navigation",from:t,to:e.path,stepTitle:e.title}),f(!1)},E=async()=>{if(h&&window.confirm("Are you sure you want to clear all demo data? This will reset your progress and start fresh.")){j(!0);try{g.B.saveGuestInteraction("demo_action",{action:"demo_data_cleared",currentStep:null==N?void 0:N.title,completedSteps:S}),await x.N.clearDemoDataForUser(h.id),g.B.clearGuestData(),window.location.reload()}catch(e){console.error("Error clearing demo data:",e),alert("Failed to clear demo data. Please try again.")}finally{j(!1)}}};return(0,a.jsxs)("div",{className:"demo-wizard ".concat(r),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:"\uD83C\uDFAD Demo Mode"}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[S,"/",p.length]}),(0,a.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(_,"%")}})})]})]}),(0,a.jsx)("button",{onClick:()=>f(!m),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:m?"Hide Guide":"Demo Guide"})]}),m&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Demo Guide - Explore CoParent.Online"}),(0,a.jsx)("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:p.map((e,r)=>{let s=y.has(e.path),n=e.path===t;return(0,a.jsx)(o(),{href:e.path,onClick:()=>C(e),className:"p-4 rounded-lg border-2 transition-all hover:border-blue-300 ".concat(n?"border-blue-500 bg-blue-50":s?"border-green-300 bg-green-50":"border-gray-200 bg-white hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat(s?"bg-green-100 text-green-600":n?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:s?"✓":e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium ".concat(n?"text-blue-900":s?"text-green-900":"text-gray-900"),children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]})},e.path)})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:0===S?"Start with any feature that interests you most!":S===p.length?"\uD83C\uDF89 You've explored everything! Ready to sign up?":"Great progress! ".concat(p.length-S," more areas to explore.")}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:E,disabled:b,className:"text-gray-600 border-gray-300 hover:bg-gray-50",children:b?"\uD83D\uDD04 Clearing...":"\uD83D\uDDD1️ Clear Demo Data"}),w&&S<p.length&&(0,a.jsx)(o(),{href:w.path,children:(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>C(w),children:["Next: ",w.title]})}),S>0&&(0,a.jsx)(i.$,{onClick:()=>{let e=g.B.getConversionReadiness();g.B.saveGuestInteraction("demo_action",{action:"signup_clicked",fromWizard:!0,currentStep:null==N?void 0:N.title,conversionScore:e.score,completedSteps:S}),(0,c.Uj)("/signup?convert=true")},size:"sm",className:S>=3?"bg-green-600 hover:bg-green-700":"",children:S>=3?"\uD83C\uDF89 Sign Up Now":"Sign Up"})]})]})})]})})]})}class y{static getRecentItems(){try{let e=localStorage.getItem(this.STORAGE_KEY);if(!e)return[];return JSON.parse(e).filter(e=>e&&"string"==typeof e.href&&"string"==typeof e.label&&"number"==typeof e.timestamp).map(e=>({...e,href:(0,c.Fd)(e.href)})).sort((e,r)=>r.timestamp-e.timestamp)}catch(e){return[]}}static addRecentItem(e){if(e.href&&e.label)try{let r=this.getRecentItems(),t=(0,c.Fd)(e.href),a=r.filter(e=>e.href!==t),s=[{...e,href:t,timestamp:Date.now()},...a].slice(0,this.MAX_ITEMS);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(s))}catch(e){}}static clearRecentItems(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(e){}}static removeRecentItem(e){try{let r=this.getRecentItems(),t=(0,c.Fd)(e),a=r.filter(e=>e.href!==t);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a))}catch(e){}}static getPageLabel(e){let r=(0,c.Fd)(e),t={"/":"Home","/dashboard":"Dashboard","/calendar":"Calendar","/situations":"Situations","/onboarding":"Demo","/preferences":"Preferences","/preferences/days":"Day Preferences","/preferences/dates":"Date Preferences","/preferences/handoff-times":"Handoff Times","/app-preview":"App Preview","/login":"Sign In","/signup":"Sign Up"};if(t[r])return t[r];let a=r.split("/").filter(Boolean);return 0===a.length?"Home":a[a.length-1].split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}static trackPageVisit(e){let r=(0,c.Fd)(e);if(["/login","/signup","/"].includes(r))return;let t=this.getPageLabel(r);this.addRecentItem({label:t,href:r})}}function v(){let{user:e,isGuest:r,signOut:t,startGuestSession:l}=(0,n.As)(),{shouldShowConversionPrompt:h,shouldShowUrgentPrompt:g}=(0,n.Km)(),x=(0,d.usePathname)(),[p,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)([]),[k,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{y.trackPageVisit(x),j(y.getRecentItems())},[x]),(0,s.useEffect)(()=>{v(!1)},[x]);let w=[{href:"/onboarding",label:"Try Demo",requiresAuth:!1}],S=e?[{href:"/dashboard",label:"Dashboard",requiresAuth:!0},{href:"/calendar",label:"Calendar",requiresAuth:!0},{href:"/situations",label:"Situations",requiresAuth:!0},{href:"/expenses",label:"Expenses",requiresAuth:!0},{href:"/inventory",label:"Inventory",requiresAuth:!0},{href:"/preferences",label:"Preferences",requiresAuth:!0},...w]:w;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(o(),{href:"/",className:"text-xl font-bold text-gray-900 dark:text-white",children:"CoParent.Online"})}),(0,a.jsx)("nav",{className:"hidden lg:flex space-x-8",children:S.map(e=>(0,a.jsx)(o(),{href:e.href,className:"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white ".concat((0,c.wz)(x,e.href)?"text-blue-600 dark:text-blue-400 font-medium":""),children:e.label},e.href))}),(0,a.jsxs)("div",{className:"hidden lg:flex items-center space-x-4",children:[(0,a.jsx)(m,{className:"w-64"}),b.length>0&&e&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>N(!k),className:"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300","aria-label":"Recent items",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),k&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-600 z-50",children:[(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600",children:"Recently Accessed"}),b.map(e=>(0,a.jsx)(o(),{href:e.href,onClick:()=>N(!1),className:"block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.label},e.href))]})]}),(0,a.jsx)(f,{className:"relative"}),g&&(0,a.jsx)("div",{"data-testid":"urgent-conversion-prompt",className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium animate-pulse",children:"⚠️ Demo expires soon!"}),h&&!g&&(0,a.jsx)("div",{"data-testid":"conversion-prompt",className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:"\uD83D\uDCBE Save your demo progress"}),e?(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[r&&(0,a.jsx)(i.$,{"data-testid":"convert-to-permanent",variant:"outline",size:"sm",className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 font-medium",onClick:()=>(0,c.Uj)("/signup?convert=true"),children:"\uD83D\uDCBE Save Account"}),(0,a.jsx)("div",{"data-testid":"user-menu",className:"text-gray-700 dark:text-gray-300",children:e.full_name}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:t,children:"Sign Out"})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(o(),{href:"/login",children:(0,a.jsx)(i.$,{variant:"ghost",size:"sm","data-testid":"login-link",children:"Sign In"})}),(0,a.jsx)(o(),{href:"/signup",children:(0,a.jsx)(i.$,{size:"sm",children:"Sign Up"})})]})]}),(0,a.jsx)("div",{className:"lg:hidden",children:(0,a.jsxs)("button",{onClick:()=>v(!p),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-expanded":p,children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),p?(0,a.jsx)("svg",{className:"block h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,a.jsx)("svg",{className:"block h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),p&&(0,a.jsx)("div",{className:"lg:hidden border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"px-4 py-3 space-y-3",children:[(0,a.jsx)(m,{placeholder:"Search..."}),(0,a.jsx)("div",{className:"space-y-1",children:S.map(e=>(0,a.jsx)(o(),{href:e.href,className:"block px-3 py-2 rounded-md text-base font-medium ".concat((0,c.wz)(x,e.href)?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e.label},e.href))}),b.length>0&&e&&(0,a.jsxs)("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-600",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 px-3 mb-2",children:"Recently Accessed"}),b.map(e=>(0,a.jsx)(o(),{href:e.href,className:"block px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:e.label},e.href))]}),(0,a.jsx)("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-600",children:e?(0,a.jsxs)("div",{className:"space-y-3",children:[r&&(0,a.jsx)(i.$,{"data-testid":"convert-to-permanent-mobile",variant:"outline",size:"sm",className:"w-full bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 font-medium",onClick:()=>(0,c.Uj)("/signup?convert=true"),children:"\uD83D\uDCBE Save Account"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.full_name}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:t,children:"Sign Out"})]})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o(),{href:"/login",className:"block",children:(0,a.jsx)(i.$,{variant:"ghost",size:"sm",className:"w-full",children:"Sign In"})}),(0,a.jsx)(o(),{href:"/signup",className:"block",children:(0,a.jsx)(i.$,{size:"sm",className:"w-full",children:"Sign Up"})})]})})]})})]}),(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2",children:(0,a.jsx)(u,{})})}),!e&&(0,a.jsx)("div",{"data-testid":"login-prompt",className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[(0,a.jsx)(o(),{href:"/login",className:"text-blue-600 hover:text-blue-800",children:"Sign in"})," to save your preferences or"," ",(0,a.jsx)("button",{"data-testid":"start-guest-session",className:"text-blue-600 hover:text-blue-800 underline",onClick:async()=>{try{await l(),(0,c.Uj)("/onboarding")}catch(e){console.error("Failed to start guest session:",e),(0,c.Uj)("/onboarding")}},children:"try as guest"})]})}),k&&(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>N(!1)})]})}y.STORAGE_KEY="coparent-recent-items",y.MAX_ITEMS=5},2085:(e,r,t)=>{"use strict";t.d(r,{F:()=>i});var a=t(2596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,i=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return n(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:i,defaultVariants:l}=r,o=Object.keys(i).map(e=>{let r=null==t?void 0:t[e],a=null==l?void 0:l[e];if(null===r)return null;let n=s(r)||s(a);return i[e][n]}),d=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return n(e,o,null==r||null==(a=r.compoundVariants)?void 0:a.reduce((e,r)=>{let{class:t,className:a,...s}=r;return Object.entries(s).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...l,...d}[r]):({...l,...d})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},2215:(e,r,t)=>{"use strict";t.d(r,{N:()=>n});var a=t(2099);class s{async seedDemoDataForUser(e){console.log("Seeding demo data for user:",e);try{let{error:r}=await this.supabase.rpc("seed_demo_data_for_user",{user_id:e});if(r)throw console.error("Error seeding demo data:",r),Error("Failed to seed demo data");console.log("Demo data seeded successfully for user:",e)}catch(e){throw console.error("Error in seedDemoDataForUser:",e),e}}async clearDemoDataForUser(e){console.log("Clearing demo data for user:",e);try{let{error:r}=await this.supabase.rpc("clear_demo_data_for_user",{user_id:e});if(r)throw console.error("Error clearing demo data:",r),Error("Failed to clear demo data");console.log("Demo data cleared successfully for user:",e)}catch(e){throw console.error("Error in clearDemoDataForUser:",e),e}}async getDemoPreferences(e){console.log("Getting demo preferences for user:",e);try{let{data:r,error:t}=await this.supabase.from("co_parent_relationships").select("id").or("parent_a_id.eq.".concat(e,",parent_b_id.eq.").concat(e)).eq("is_demo",!0).limit(1);if(t)throw console.error("Error getting demo relationship:",t),t;if(!r||0===r.length)return console.log("No demo relationship found, returning empty preferences"),[];let a=r[0].id,{data:s,error:n}=await this.supabase.from("day_preferences").select("day_of_week, priority").eq("relationship_id",a).eq("parent_id",e).eq("is_demo",!0).order("priority");if(n)throw console.error("Error getting demo preferences:",n),n;if(!s||0===s.length)return[];let i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["Family time and relaxation","Work schedule flexibility","Midweek coordination","School activities","Planning ahead","Weekend preparation","Recreation and activities"],o=s.map((e,r)=>({id:"day-".concat(e.day_of_week),label:i[e.day_of_week],description:l[e.day_of_week],priority:e.priority}));return console.log("Retrieved demo preferences:",o),o}catch(e){throw console.error("Error in getDemoPreferences:",e),e}}async saveDemoPreferences(e,r){console.log("Saving demo preferences for user:",e,r);try{let t=await this.getDemoRelationshipId(e);if(!t)throw Error("No demo relationship found for user");let{error:a}=await this.supabase.from("day_preferences").delete().eq("relationship_id",t).eq("parent_id",e).eq("is_demo",!0);if(a)throw console.error("Error deleting existing preferences:",a),a;let s=r.map((r,a)=>{let s=parseInt(r.id.replace("day-",""));return{relationship_id:t,parent_id:e,day_of_week:s,priority:a+1,is_demo:!0}}),{error:n}=await this.supabase.from("day_preferences").insert(s);if(n)throw console.error("Error inserting preferences:",n),n;console.log("Demo preferences saved successfully")}catch(e){throw console.error("Error in saveDemoPreferences:",e),e}}async getDemoRelationshipId(e){try{let{data:r,error:t}=await this.supabase.from("co_parent_relationships").select("id").or("parent_a_id.eq.".concat(e,",parent_b_id.eq.").concat(e)).eq("is_demo",!0).limit(1);if(t)return console.error("Error getting demo relationship:",t),null;return r&&r.length>0?r[0].id:null}catch(e){return console.error("Error in getDemoRelationshipId:",e),null}}constructor(){this.supabase=(0,a.k)()}}let n=new s},4624:(e,r,t)=>{"use strict";t.d(r,{DX:()=>i});var a=t(2115);function s(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}var n=t(5155),i=function(e){let r=function(e){let r=a.forwardRef((e,r)=>{let{children:t,...n}=e;if(a.isValidElement(t)){var i;let e,l,o=(i=t,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),d=function(e,r){let t={...r};for(let a in r){let s=e[a],n=r[a];/^on[A-Z]/.test(a)?s&&n?t[a]=(...e)=>{let r=n(...e);return s(...e),r}:s&&(t[a]=s):"style"===a?t[a]={...s,...n}:"className"===a&&(t[a]=[s,n].filter(Boolean).join(" "))}return{...e,...t}}(n,t.props);return t.type!==a.Fragment&&(d.ref=r?function(...e){return r=>{let t=!1,a=e.map(e=>{let a=s(e,r);return t||"function"!=typeof a||(t=!0),a});if(t)return()=>{for(let r=0;r<a.length;r++){let t=a[r];"function"==typeof t?t():s(e[r],null)}}}}(r,o):o),a.cloneElement(t,d)}return a.Children.count(t)>1?a.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=a.forwardRef((e,t)=>{let{children:s,...i}=e,l=a.Children.toArray(s),d=l.find(o);if(d){let e=d.props.children,s=l.map(r=>r!==d?r:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(r,{...i,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,n.jsx)(r,{...i,ref:t,children:s})});return t.displayName=`${e}.Slot`,t}("Slot"),l=Symbol("radix.slottable");function o(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},4694:(e,r,t)=>{"use strict";t.d(r,{EnvironmentIndicator:()=>n});var a=t(5155),s=t(2115);function n(){let[e,r]=(0,s.useState)(null),[t,n]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{},[]),!t||!e)return null;let i="production"===e.environment?"bg-red-500":"bg-green-500",l=e.hasValidConfig?"text-green-600":"text-red-600";return(0,a.jsxs)("div",{className:"fixed bottom-4 right-4 z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-3 text-xs max-w-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(i)}),(0,a.jsxs)("span",{className:"font-semibold",children:["Environment: ",e.environment]})]}),(0,a.jsxs)("div",{className:"space-y-1 text-gray-600",children:[(0,a.jsxs)("div",{children:["Branch: ",(0,a.jsx)("span",{className:"font-mono",children:e.currentBranch})]}),(0,a.jsxs)("div",{children:["Config: ",(0,a.jsx)("span",{className:l,children:e.configSource})]}),(0,a.jsxs)("div",{children:["Supabase: ",(0,a.jsx)("span",{className:"font-mono text-xs",children:e.supabaseUrl.split(".")[0].split("//")[1]||"N/A"})]}),(0,a.jsxs)("div",{children:["Valid: ",(0,a.jsx)("span",{className:l,children:e.hasValidConfig?"✓":"✗"})]})]}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-gray-600 text-xs",title:"Hide environment indicator",children:"\xd7"})]})}t(844)},5665:(e,r,t)=>{"use strict";t.d(r,{Providers:()=>n});var a=t(5155),s=t(3715);function n(e){let{children:r}=e;return(0,a.jsx)(s.OJ,{children:r})}},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},5786:()=>{},7741:(e,r,t)=>{Promise.resolve().then(t.bind(t,4694)),Promise.resolve().then(t.bind(t,1499)),Promise.resolve().then(t.bind(t,5665)),Promise.resolve().then(t.t.bind(t,5786,23))},9434:(e,r,t)=>{"use strict";t.d(r,{Fd:()=>o,Uj:()=>i,cn:()=>n,wz:()=>l});var a=t(2596),s=t(9688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}function i(e){let r=e.startsWith("/")?"".concat("/pr-69").concat(e):e;window.location.href=r}function l(e,r){return e===r||("/"===r?"/"===e:e.startsWith(r+"/")||e===r)}function o(e){return e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:"/".concat(e):"/"}}},e=>{var r=r=>e(e.s=r);e.O(0,[523,982,277,874,715,899,441,684,358],()=>r(7741)),_N_E=e.O()}]);