(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[259],{3538:(e,s,r)=>{Promise.resolve().then(r.bind(r,4302))},4302:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(5155),i=r(2115),n=r(3715),a=r(5034),l=r(3006),d=r(4899);let o=[{id:"1",label:"Family Time",description:"Spending quality time with children and family activities"},{id:"2",label:"Work Schedule",description:"Maintaining professional commitments and career goals"},{id:"3",label:"Personal Health",description:"Exercise, medical appointments, and self-care"},{id:"4",label:"Social Activities",description:"Time with friends, dating, and social commitments"},{id:"5",label:"Household Tasks",description:"Cleaning, maintenance, and home organization"},{id:"6",label:"Education & Growth",description:"Learning new skills, courses, and personal development"}],c={relationshipId:"rel-123",currentUserId:"user-123",existingPreferences:[],otherParentPreferences:[]};function m(){let{isGuest:e,isAuthenticated:s}=(0,n.As)(),[r,m]=(0,i.useState)([]),[h,u]=(0,i.useState)(!1),[x,p]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(e){var s;let e=d.B.getGuestData();(null==e||null==(s=e.preferences)?void 0:s.days)&&Array.isArray(e.preferences.days)&&e.preferences.days.length>0?(m(e.preferences.days),u(!0)):p(!0)}},[e]),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Preferences"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Set your preferences for scheduling and co-parenting arrangements."}),e&&(0,t.jsxs)("div",{className:"mt-3 inline-flex items-center bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[(0,t.jsx)("div",{className:"text-blue-600 mr-2",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,t.jsx)("span",{className:"text-sm text-blue-800",children:"Demo Mode: Try our priority sorting system to see how it helps organize your life!"})]})]}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Day Preferences"}),e?(0,t.jsx)("div",{className:"space-y-6",children:!h&&x?(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,t.jsx)(l.S,{items:o,onSortComplete:e=>{m(e),u(!0),p(!1),d.B.updateGuestPreferences("days",e),d.B.saveGuestInteraction("preference_sort",{type:"priority_sorting",items:e.map(e=>({id:e.id,label:e.label})),completedAt:new Date().toISOString()}),console.log("Sorting completed and saved to guest session:",e)},title:"Prioritize Your Life Areas",description:"We'll show you pairs of life areas. Choose which one is more important to you right now."})}):h?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-green-600 mb-2",children:"âœ“ Your Priorities Are Set!"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Here's how you've prioritized your life areas. This ranking helps us suggest better scheduling options for you."})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h4",{className:"text-xl font-semibold mb-4",children:"Your Priority Ranking:"}),(0,t.jsx)("div",{className:"space-y-3",children:r.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-sm font-semibold mr-4",children:s+1}),(0,t.jsxs)("div",{className:"flex-grow",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.label}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.id))})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("button",{onClick:()=>{m([]),u(!1),p(!0),d.B.updateGuestPreferences("days",[]),d.B.saveGuestInteraction("demo_action",{action:"demo_reset",demoType:"preferences"})},className:"inline-flex items-center px-6 py-3 border border-gray-300 shadow-sm text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Try Different Order"})})]}):(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ready to Set Your Preferences?"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Our interactive sorting system helps you prioritize what matters most."}),(0,t.jsx)("button",{onClick:()=>p(!0),className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Start Priority Sorting"})]})}):(0,t.jsx)(a.DayPreferenceSorting,{relationshipId:c.relationshipId,currentUserId:c.currentUserId,existingPreferences:c.existingPreferences,otherParentPreferences:c.otherParentPreferences})]}),(0,t.jsxs)("section",{"data-testid":"date-preferences",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Date Preferences"}),(0,t.jsx)("div",{className:"bg-gray-50 p-6 rounded-lg",children:(0,t.jsx)("p",{className:"text-gray-600",children:e?"This feature will be available after completing the priority sorting above.":"Date preferences coming soon..."})})]})]})]})})}},5034:(e,s,r)=>{"use strict";r.d(s,{DayPreferenceSorting:()=>d});var t=r(5155),i=r(2115),n=r(3006),a=r(2099);let l=[{id:"0",label:"Sunday",description:"Weekend day"},{id:"1",label:"Monday",description:"Start of school week"},{id:"2",label:"Tuesday",description:"School day"},{id:"3",label:"Wednesday",description:"Mid-week"},{id:"4",label:"Thursday",description:"School day"},{id:"5",label:"Friday",description:"End of school week"},{id:"6",label:"Saturday",description:"Weekend day"}];function d(e){let{relationshipId:s,currentUserId:r,existingPreferences:d=[],otherParentPreferences:o=[]}=e,[c,m]=(0,i.useState)(l),[h,u]=(0,i.useState)(!1),[x,p]=(0,i.useState)(null),[f,y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(d.length>0){let e=[...d].sort((e,s)=>e.priority-s.priority),s=e.map(e=>l.find(s=>parseInt(s.id)===e.dayOfWeek)),r=new Set(e.map(e=>e.dayOfWeek.toString()));m([...s,...l.filter(e=>!r.has(e.id))])}},[d]);let g=async e=>{u(!0),p(null);try{let t=(0,a.k)(),i=e.map((e,t)=>({relationshipId:s,userId:r,dayOfWeek:parseInt(e.id),priority:t+1})),{error:n}=await t.from("day_preferences").upsert(i);if(n)throw n;m(e)}catch(e){p("Error saving preferences. Please try again."),console.error("Error saving day preferences:",e)}finally{u(!1)}};return(0,t.jsxs)("div",{className:"space-y-6","data-testid":"day-preferences",children:[o.length>0&&(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Other Parent's Preferences"}),(0,t.jsx)("button",{onClick:()=>y(!f),className:"text-blue-600 hover:text-blue-800 text-sm",children:f?"Hide":"Show"})]}),f&&(0,t.jsx)("div",{className:"space-y-2",children:o.sort((e,s)=>e.priority-s.priority).map((e,s)=>{let r=l.find(s=>parseInt(s.id)===e.dayOfWeek);return(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[(0,t.jsx)("span",{className:"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-xs mr-3",children:s+1}),(0,t.jsx)("span",{children:null==r?void 0:r.label})]},e.dayOfWeek)})})]}),x&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-red-800",children:x})}),h&&(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Saving your preferences..."})}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("button",{"data-testid":"sort-day-preferences",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>{let e=document.querySelector('[data-testid="sorting-component"]');e&&e.scrollIntoView({behavior:"smooth"})},children:"Start Sorting Day Preferences"})}),(0,t.jsx)(n.S,{items:c,onSortComplete:g,title:"Sort Your Day Preferences",description:"Rank the days of the week by your preference to have your child. Most preferred days will be ranked higher."})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[982,277,804,715,796,899,6,441,684,358],()=>s(3538)),_N_E=e.O()}]);