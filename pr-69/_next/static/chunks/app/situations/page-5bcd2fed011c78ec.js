(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{1851:(e,s,t)=>{Promise.resolve().then(t.bind(t,5882))},5882:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var r=t(5155),a=t(2115),i=t(3382),l=t(8417),n=t(5705),d=t(6695),c=t(285),o=t(9434);let u=a.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white placeholder:text-gray-400 focus-visible:ring-blue-500",t),ref:s,...i})});u.displayName="Input";let x=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white placeholder:text-gray-400 focus-visible:ring-blue-500",t),ref:s,...a})});x.displayName="Textarea";let m=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsx)("select",{className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white focus:ring-blue-500",t),ref:s,...i,children:a})});m.displayName="Select";let h=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-gray-300 bg-white focus:ring-blue-500",t),...i,children:a})});h.displayName="SelectTrigger";let g=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("span",{ref:s,className:(0,o.cn)("block truncate",t),...a})});g.displayName="SelectValue";let p=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md","border-gray-200 bg-white shadow-lg",t),...i,children:a})});p.displayName="SelectContent";let b=a.forwardRef((e,s)=>{let{className:t,children:a,value:i,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50","hover:bg-gray-100 focus:bg-gray-100",t),"data-value":i,...l,children:a})});b.displayName="SelectItem";let j=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("label",{ref:s,className:(0,o.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70","text-gray-700",t),...a})});j.displayName="Label";let y={logistics:{icon:"\uD83D\uDCE6",label:"Logistics",description:"Coordinate items, schedules, and pickups",color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},barter:{icon:"\uD83D\uDD04",label:"Barter/Trade",description:"Propose exchanges and swaps",color:"from-green-500 to-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},behavioral:{icon:"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66",label:"Behavioral",description:"Coordinate parenting responses",color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},administrative:{icon:"\uD83D\uDCCB",label:"Administrative",description:"Handle paperwork and forms",color:"from-gray-500 to-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200"},emergency:{icon:"⚠️",label:"Emergency",description:"Urgent situations requiring immediate attention",color:"from-red-500 to-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}};function f(e){let{relationshipId:s,currentUserId:t,involvedParties:i,onSituationCreated:l,isGuestMode:o=!1}=e,[f,v]=(0,a.useState)(!1),[N,D]=(0,a.useState)("logistics"),[w,C]=(0,a.useState)({title:"",description:"",priority:"medium",assignedTo:[],deadline:"",metadata:{}}),k=y[N],S=async e=>{if(e.preventDefault(),!f){v(!0);try{let e={id:"situation-".concat(Date.now()),relationshipId:s,type:N,title:w.title,description:w.description,priority:w.priority,status:"created",createdBy:t,assignedTo:w.assignedTo.length>0?w.assignedTo:i.filter(e=>e!==t),involvedParties:i,createdAt:new Date,deadline:w.deadline?new Date(w.deadline):void 0,metadata:T(N,w.metadata),updates:[],escalations:[]};o&&n.guestModeManager.saveGuestInteraction("demo_action",{type:"situation_created",situationType:N,title:w.title,priority:w.priority,source:"situation_creator"}),l(e),C({title:"",description:"",priority:"medium",assignedTo:[],deadline:"",metadata:{}}),D("logistics")}catch(e){console.error("Error creating situation:",e)}finally{v(!1)}}},T=(e,s)=>{switch(e){case"emergency":return{emergencyType:s.emergencyType||"other",urgencyLevel:s.urgencyLevel||3,location:s.location,requiresPickup:s.requiresPickup||!1,requiresMedicalAttention:s.requiresMedicalAttention||!1,emergencyContacts:s.emergencyContacts||[]};case"logistics":return{logisticsType:s.logisticsType||"other",items:s.items||[],location:s.location,pickupRequired:s.pickupRequired||!1};case"barter":return{offering:s.offering||[],requesting:s.requesting||[],fairnessScore:s.fairnessScore||50,expiresAt:s.expiresAt};case"behavioral":return{behaviorType:s.behaviorType||"other",severity:s.severity||3,childId:s.childId,incident:s.incident,parentalResponse:s.parentalResponse};default:return s}},E=(e,s)=>{C(t=>({...t,metadata:{...t.metadata,[e]:s}}))},M=e=>{switch(e){case"urgent":return"\uD83D\uDEA8";case"high":return"\uD83D\uDD34";case"medium":return"\uD83D\uDFE1";case"low":return"\uD83D\uDFE2";default:return"⚪"}};return(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)(d.Zp,{className:"shadow-lg border-2 ".concat(k.borderColor," ").concat(k.bgColor," transition-all duration-300"),children:[(0,r.jsx)(d.aR,{className:"bg-gradient-to-r ".concat(k.color," text-white rounded-t-lg"),children:(0,r.jsxs)(d.ZB,{className:"text-2xl flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-3xl",children:k.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Create New Situation"}),(0,r.jsx)("div",{className:"text-sm font-normal opacity-90 mt-1",children:k.description})]})]})}),(0,r.jsx)(d.Wu,{className:"p-6",children:(0,r.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(j,{htmlFor:"situationType",className:"text-lg font-semibold",children:"Choose Situation Type"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(y).map(e=>{let[s,t]=e;return(0,r.jsxs)("button",{type:"button",onClick:()=>D(s),className:"p-4 rounded-lg border-2 transition-all duration-200 hover:scale-105 ".concat(N===s?"".concat(t.borderColor," ").concat(t.bgColor," shadow-md"):"border-gray-200 bg-white hover:border-gray-300"),children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:t.icon}),(0,r.jsx)("div",{className:"text-sm font-medium",children:t.label})]},s)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(j,{htmlFor:"title",className:"text-base font-medium",children:"Situation Title"}),(0,r.jsx)(u,{id:"title",required:!0,placeholder:"Brief, clear title for the situation",value:w.title,onChange:e=>C(s=>({...s,title:e.target.value})),className:"mt-1 text-lg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"priority",className:"text-base font-medium",children:"Priority Level"}),(0,r.jsxs)(m,{value:w.priority,onValueChange:e=>C(s=>({...s,priority:e})),children:[(0,r.jsx)(h,{className:"mt-1",children:(0,r.jsx)(g,{})}),(0,r.jsxs)(p,{children:[(0,r.jsxs)(b,{value:"low",children:[M("low")," Low Priority"]}),(0,r.jsxs)(b,{value:"medium",children:[M("medium")," Medium Priority"]}),(0,r.jsxs)(b,{value:"high",children:[M("high")," High Priority"]}),(0,r.jsxs)(b,{value:"urgent",children:[M("urgent")," Urgent"]})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"description",className:"text-base font-medium",children:"Detailed Description"}),(0,r.jsx)(x,{id:"description",required:!0,placeholder:"Provide a clear, detailed description of the situation and what needs to be done",value:w.description,onChange:e=>C(s=>({...s,description:e.target.value})),className:"mt-1 min-h-[100px]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"deadline",className:"text-base font-medium",children:"Deadline (Optional)"}),(0,r.jsx)(u,{id:"deadline",type:"datetime-local",value:w.deadline,onChange:e=>C(s=>({...s,deadline:e.target.value})),className:"mt-1"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Set a deadline if this situation is time-sensitive"})]}),(()=>{switch(N){case"emergency":return(0,r.jsxs)("div",{className:"space-y-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("span",{className:"text-red-600 text-lg",children:"⚠️"}),(0,r.jsx)("h4",{className:"font-medium text-red-800",children:"Emergency Details"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"emergencyType",className:"text-red-700",children:"Emergency Type"}),(0,r.jsxs)(m,{onValueChange:e=>E("emergencyType",e),children:[(0,r.jsx)(h,{className:"border-red-300 focus:border-red-500",children:(0,r.jsx)(g,{placeholder:"Select emergency type"})}),(0,r.jsxs)(p,{children:[(0,r.jsx)(b,{value:"pickup",children:"\uD83C\uDFEB School/Daycare Pickup"}),(0,r.jsx)(b,{value:"injury",children:"\uD83E\uDE79 Injury/Accident"}),(0,r.jsx)(b,{value:"illness",children:"\uD83E\uDD12 Illness"}),(0,r.jsx)(b,{value:"behavioral",children:"\uD83D\uDE24 Behavioral Emergency"}),(0,r.jsx)(b,{value:"other",children:"❓ Other Emergency"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"urgencyLevel",className:"text-red-700",children:"Urgency Level"}),(0,r.jsxs)(m,{onValueChange:e=>E("urgencyLevel",parseInt(e)),children:[(0,r.jsx)(h,{className:"border-red-300 focus:border-red-500",children:(0,r.jsx)(g,{placeholder:"Select urgency"})}),(0,r.jsxs)(p,{children:[(0,r.jsx)(b,{value:"1",children:"\uD83D\uDFE2 1 - Low"}),(0,r.jsx)(b,{value:"2",children:"\uD83D\uDFE1 2 - Moderate"}),(0,r.jsx)(b,{value:"3",children:"\uD83D\uDFE0 3 - High"}),(0,r.jsx)(b,{value:"4",children:"\uD83D\uDD34 4 - Very High"}),(0,r.jsx)(b,{value:"5",children:"\uD83D\uDEA8 5 - Critical"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"location",className:"text-red-700",children:"Location"}),(0,r.jsx)(u,{id:"location",placeholder:"Where is the emergency?",value:w.metadata.location||"",onChange:e=>E("location",e.target.value),className:"border-red-300 focus:border-red-500"})]})]});case"logistics":return(0,r.jsxs)("div",{className:"space-y-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("span",{className:"text-blue-600 text-lg",children:"\uD83D\uDCE6"}),(0,r.jsx)("h4",{className:"font-medium text-blue-800",children:"Logistics Details"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"logisticsType",className:"text-blue-700",children:"Logistics Type"}),(0,r.jsxs)(m,{onValueChange:e=>E("logisticsType",e),children:[(0,r.jsx)(h,{className:"border-blue-300 focus:border-blue-500",children:(0,r.jsx)(g,{placeholder:"Select logistics type"})}),(0,r.jsxs)(p,{children:[(0,r.jsx)(b,{value:"forgotten_item",children:"\uD83C\uDF92 Forgotten Item"}),(0,r.jsx)(b,{value:"schedule_change",children:"\uD83D\uDCC5 Schedule Change"}),(0,r.jsx)(b,{value:"pickup_coordination",children:"\uD83D\uDE97 Pickup Coordination"}),(0,r.jsx)(b,{value:"item_transfer",children:"\uD83D\uDCE6 Item Transfer"}),(0,r.jsx)(b,{value:"other",children:"\uD83D\uDCCB Other"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"items",className:"text-blue-700",children:"Items/Details"}),(0,r.jsx)(x,{id:"items",placeholder:"What items or details need coordination?",value:w.metadata.items||"",onChange:e=>E("items",e.target.value),className:"border-blue-300 focus:border-blue-500 min-h-[80px]"})]})]});case"barter":return(0,r.jsxs)("div",{className:"space-y-4 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("span",{className:"text-green-600 text-lg",children:"\uD83D\uDD04"}),(0,r.jsx)("h4",{className:"font-medium text-green-800",children:"Trade Details"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"offering",className:"text-green-700",children:"What You're Offering"}),(0,r.jsx)(x,{id:"offering",placeholder:"What are you willing to give up or trade?",value:w.metadata.offering||"",onChange:e=>E("offering",e.target.value),className:"border-green-300 focus:border-green-500 min-h-[80px]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"requesting",className:"text-green-700",children:"What You're Requesting"}),(0,r.jsx)(x,{id:"requesting",placeholder:"What do you want in return?",value:w.metadata.requesting||"",onChange:e=>E("requesting",e.target.value),className:"border-green-300 focus:border-green-500 min-h-[80px]"})]})]})]});case"behavioral":return(0,r.jsxs)("div",{className:"space-y-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("span",{className:"text-purple-600 text-lg",children:"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66"}),(0,r.jsx)("h4",{className:"font-medium text-purple-800",children:"Behavioral Details"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"behaviorType",className:"text-purple-700",children:"Behavior Type"}),(0,r.jsxs)(m,{onValueChange:e=>E("behaviorType",e),children:[(0,r.jsx)(h,{className:"border-purple-300 focus:border-purple-500",children:(0,r.jsx)(g,{placeholder:"Select behavior type"})}),(0,r.jsxs)(p,{children:[(0,r.jsx)(b,{value:"academic",children:"\uD83D\uDCDA Academic Issues"}),(0,r.jsx)(b,{value:"social",children:"\uD83D\uDC6B Social Issues"}),(0,r.jsx)(b,{value:"emotional",children:"\uD83D\uDCAD Emotional Issues"}),(0,r.jsx)(b,{value:"disciplinary",children:"⚖️ Disciplinary Issues"}),(0,r.jsx)(b,{value:"developmental",children:"\uD83C\uDF31 Developmental Concerns"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{htmlFor:"severity",className:"text-purple-700",children:"Severity Level"}),(0,r.jsxs)(m,{onValueChange:e=>E("severity",parseInt(e)),children:[(0,r.jsx)(h,{className:"border-purple-300 focus:border-purple-500",children:(0,r.jsx)(g,{placeholder:"Select severity"})}),(0,r.jsxs)(p,{children:[(0,r.jsx)(b,{value:"1",children:"\uD83D\uDFE2 1 - Minor"}),(0,r.jsx)(b,{value:"2",children:"\uD83D\uDFE1 2 - Moderate"}),(0,r.jsx)(b,{value:"3",children:"\uD83D\uDFE0 3 - Significant"}),(0,r.jsx)(b,{value:"4",children:"\uD83D\uDD34 4 - Major"}),(0,r.jsx)(b,{value:"5",children:"\uD83D\uDEA8 5 - Severe"})]})]})]})]})]});default:return null}})(),(0,r.jsx)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:(0,r.jsx)(c.$,{type:"submit",disabled:f||!w.title||!w.description,className:"px-8 py-3 text-lg font-medium transition-all duration-200 ".concat("emergency"===N?"bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-xl":"bg-gradient-to-r ".concat(k.color," text-white shadow-lg hover:shadow-xl hover:scale-105")),children:f?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,r.jsx)("span",{children:"Creating..."})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:k.icon}),(0,r.jsxs)("span",{children:["Create ",k.label]})]})})}),o&&(0,r.jsx)("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"text-blue-600 text-xl",children:"\uD83C\uDFAD"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-blue-800",children:"Demo Mode Active"}),(0,r.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"This situation will be created for demonstration purposes. In a real implementation, it would be saved to the database and notifications sent to your co-parent."})]})]})})]})})]})})}var v=t(7122);function N(e){var s,t;let{situation:i,onUpdate:l,isGuestMode:o=!1,isResolved:u=!1}=e,[x,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),p=async e=>{if(!x){m(!0);try{o&&n.guestModeManager.saveGuestInteraction("demo_action",{type:"situation_status_update",situationId:i.id,oldStatus:i.status,newStatus:e,source:"situation_card"}),l&&l({status:e})}catch(e){console.error("Error updating situation:",e)}finally{m(!1)}}},b=e=>{let s=Math.floor((new Date().getTime()-e.getTime())/6e4);if(s<1)return"Just now";if(s<60)return"".concat(s,"m ago");let t=Math.floor(s/60);if(t<24)return"".concat(t,"h ago");let r=Math.floor(t/24);return"".concat(r,"d ago")};return(0,r.jsxs)(d.Zp,{className:"hover:shadow-lg transition-shadow ".concat(u?"opacity-75":""),children:[(0,r.jsx)(d.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"text-2xl",children:(e=>{switch(e){case"emergency":return"\uD83D\uDEA8";case"logistics":return"\uD83D\uDCE6";case"barter":return"\uD83D\uDD04";case"behavioral":return"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66";case"administrative":return"\uD83D\uDCCB";default:return"\uD83D\uDCDD"}})(i.type)}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.ZB,{className:"text-lg",children:i.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:i.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:["Created ",b(i.createdAt)]}),i.deadline&&(0,r.jsxs)("span",{children:["Deadline: ",new Date(i.deadline).toLocaleDateString()]})]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat((e=>{switch(e){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(i.priority)),children:i.priority}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat((e=>{switch(e){case"in-progress":case"acknowledged":return"bg-blue-100 text-blue-800 border-blue-200";case"resolved":return"bg-green-100 text-green-800 border-green-200";case"created":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"escalated":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(i.status)),children:i.status})]})]})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Type:"}),(0,r.jsx)("p",{className:"text-gray-600 capitalize",children:i.type})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Created by:"}),(0,r.jsx)("p",{className:"text-gray-600",children:i.createdBy})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Assigned to:"}),(0,r.jsx)("p",{className:"text-gray-600",children:(null==(s=i.assignedTo)?void 0:s.join(", "))||"Unassigned"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Involved:"}),(0,r.jsx)("p",{className:"text-gray-600",children:(null==(t=i.involvedParties)?void 0:t.join(", "))||"None"})]})]}),i.metadata&&Object.keys(i.metadata).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>g(!h),className:"text-blue-600 hover:text-blue-800",children:h?"Hide Details":"Show Details"}),h&&(0,r.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Additional Details:"}),(0,r.jsx)("div",{className:"space-y-1 text-sm",children:Object.entries(i.metadata).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-600 capitalize w-24",children:[s.replace(/([A-Z])/g," $1").toLowerCase(),":"]}),(0,r.jsx)("span",{className:"text-gray-700",children:"object"==typeof t?JSON.stringify(t):String(t)})]},s)})})]})]}),i.updates&&i.updates.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Recent Updates:"}),(0,r.jsxs)("div",{className:"space-y-2",children:[i.updates.slice(-3).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-start space-x-2 p-2 bg-gray-50 rounded",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-700",children:e.content}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[b(e.timestamp)," • ",e.type]})]})]},s)),i.updates.length>3&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["... and ",i.updates.length-3," more updates"]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>{o&&n.guestModeManager.saveGuestInteraction("demo_action",{type:"situation_update_added",situationId:i.id,source:"situation_card"}),alert("Update functionality would open a form to add notes, photos, or status changes.")},disabled:x,children:"Add Update"}),!u&&(0,r.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>g(!h),children:"View Details"})]}),!u&&(0,r.jsxs)("div",{className:"flex space-x-2",children:["created"===i.status&&(0,r.jsx)(c.$,{size:"sm",onClick:()=>p("acknowledged"),disabled:x,children:"Acknowledge"}),("acknowledged"===i.status||"created"===i.status)&&(0,r.jsx)(c.$,{size:"sm",onClick:()=>p("in-progress"),disabled:x,children:"Start Progress"}),("in-progress"===i.status||"acknowledged"===i.status)&&(0,r.jsx)(c.$,{size:"sm",onClick:()=>p("resolved"),disabled:x,className:"bg-green-600 hover:bg-green-700 text-white",children:x?"Resolving...":"Resolve"})]})]}),o&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,r.jsx)("span",{className:"font-medium",children:"Demo Mode:"})," Status updates and interactions are simulated. In a real implementation, these would sync with your co-parent and send notifications."]})})]})})]})}var D=t(6874),w=t.n(D);function C(){let[e,s]=(0,a.useState)([]),[o,u]=(0,a.useState)(new Map),[x,m]=(0,a.useState)(!0),[h,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[j,y]=(0,a.useState)("all");new i.W,new l.h,(0,a.useEffect)(()=>{(async()=>{try{let e=n.guestModeManager.isGuestMode()||!0;if(g(e),e){let{generateDemoSituations:e}=await t.e(343).then(t.bind(t,7343)),r=e();s(r)}else s([])}catch(e){console.error("Error loading situations:",e)}finally{m(!1)}})()},[]);let D=(e,t)=>{u(s=>{let r=new Map(s),a=r.get(e)||[];return r.set(e,[...a,t]),r}),"handled"===t.responseType?s(s=>s.map(s=>s.id===e?{...s,status:"resolved"}:s)):"on_way"===t.responseType&&s(s=>s.map(s=>s.id===e?{...s,status:"in-progress"}:s))},C=(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,...t}:s))},k=e.filter(e=>"all"===j||e.type===j),S=k.filter(e=>"resolved"!==e.status&&"cancelled"!==e.status),T=k.filter(e=>"resolved"===e.status||"cancelled"===e.status);return x?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading situations..."})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Situation Management"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage co-parenting coordination, logistics, and situations"}),h&&(0,r.jsx)("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:"Demo Mode - Full functionality available!"})]}),(0,r.jsx)("div",{className:"flex space-x-3",children:(0,r.jsx)(c.$,{onClick:()=>b(!p),children:p?"Cancel":"+ Create Situation"})})]}),p&&(0,r.jsx)(f,{relationshipId:h?"demo-relationship":"user-relationship",currentUserId:h?"parent-1":"current-user",involvedParties:h?["parent-1","parent-2"]:["current-user","co-parent"],onSituationCreated:e=>{s(s=>[e,...s]),b(!1)},isGuestMode:h}),(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{key:"all",label:"All Situations",count:e.length},{key:"logistics",label:"Logistics",count:e.filter(e=>"logistics"===e.type).length},{key:"barter",label:"Barter/Trade",count:e.filter(e=>"barter"===e.type).length},{key:"behavioral",label:"Behavioral",count:e.filter(e=>"behavioral"===e.type).length},{key:"emergency",label:"Emergencies",count:e.filter(e=>"emergency"===e.type).length}].map(e=>(0,r.jsxs)("button",{onClick:()=>y(e.key),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(j===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.label,e.count>0&&(0,r.jsx)("span",{className:"ml-2 py-0.5 px-2 rounded-full text-xs ".concat(j===e.key?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:e.count})]},e.key))})}),S.length>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Active Situations (",S.length,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:S.map(e=>(0,r.jsxs)("div",{children:["emergency"===e.type?(0,r.jsx)(v.b,{situation:e,currentUserId:h?"parent-2":"current-user",onResponseSent:s=>D(e.id,s),isGuestMode:h}):(0,r.jsx)(N,{situation:e,onUpdate:s=>C(e.id,s),isGuestMode:h}),o.get(e.id)&&o.get(e.id).length>0&&(0,r.jsxs)(d.Zp,{className:"mt-4 border-l-4 border-l-green-500",children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{className:"text-lg",children:"Recent Responses"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)("div",{className:"space-y-3",children:o.get(e.id).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-green-600 text-sm",children:"✓"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"font-medium text-green-800",children:["acknowledged"===e.responseType&&"✓ Acknowledged","on_way"===e.responseType&&"\uD83D\uDE97 On My Way","handled"===e.responseType&&"✅ Handled","need_help"===e.responseType&&"\uD83C\uDD98 Need Help","cant_help"===e.responseType&&"❌ Can't Help"]}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),e.message&&(0,r.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.message}),e.estimatedArrival&&(0,r.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:["ETA: ",e.estimatedArrival.toLocaleTimeString()]})]})]},s))})})]})]},e.id))})]}),T.length>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Resolved Situations (",T.length,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:T.map(e=>(0,r.jsx)(N,{situation:e,onUpdate:s=>C(e.id,s),isGuestMode:h,isResolved:!0},e.id))})]}),0===k.length&&(0,r.jsx)(d.Zp,{children:(0,r.jsxs)(d.Wu,{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:"emergency"===j?(0,r.jsx)("span",{className:"text-4xl",children:"\uD83D\uDEA8"}):"logistics"===j?(0,r.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCE6"}):"barter"===j?(0,r.jsx)("span",{className:"text-4xl",children:"\uD83D\uDD04"}):"behavioral"===j?(0,r.jsx)("span",{className:"text-4xl",children:"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66"}):(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"all"===j?h?"No Demo Situations Available":"No Situations Yet":"No ".concat(j," situations")}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"emergency"===j?"Create an emergency situation when urgent coordination is needed.":"logistics"===j?"Track forgotten items, schedule changes, and coordination needs.":"barter"===j?"Propose trades and exchanges with your co-parent.":"behavioral"===j?"Coordinate responses to behavioral situations and maintain consistency.":h?"Try creating different types of situations to see how they work.":"Create your first situation to start managing co-parenting coordination."}),(0,r.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,r.jsx)(c.$,{onClick:()=>b(!0),children:"+ Create Situation"}),h&&(0,r.jsx)(w(),{href:"/situations-demo",children:(0,r.jsx)(c.$,{variant:"outline",children:"Try Interactive Demo"})})]})]})}),h&&e.length>0&&(0,r.jsx)(d.Zp,{className:"bg-blue-50 border-blue-200",children:(0,r.jsxs)(d.Wu,{className:"text-center py-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Ready to manage real situations?"}),(0,r.jsx)("p",{className:"text-blue-700 mb-4",children:"Sign up to create actual situations and coordinate with your co-parent."}),(0,r.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,r.jsx)(w(),{href:"/onboarding",children:(0,r.jsx)(c.$,{children:"Complete Onboarding"})}),(0,r.jsx)(w(),{href:"/situations-demo",children:(0,r.jsx)(c.$,{variant:"outline",children:"Try More Demos"})})]})]})})]})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[277,874,705,122,441,684,358],()=>s(1851)),_N_E=e.O()}]);