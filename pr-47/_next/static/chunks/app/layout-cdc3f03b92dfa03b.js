(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var a=t(5155),s=t(2115),n=t(4624),i=t(2085),l=t(9434);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:d=!1,...c}=e,h=d?n.DX:"button";return(0,a.jsx)(h,{className:(0,l.cn)(o({variant:s,size:i,className:t})),ref:r,...c})});d.displayName="Button"},3361:(e,r,t)=>{Promise.resolve().then(t.bind(t,7418)),Promise.resolve().then(t.bind(t,5665)),Promise.resolve().then(t.t.bind(t,5786,23))},5665:(e,r,t)=>{"use strict";t.d(r,{Providers:()=>n});var a=t(5155),s=t(3715);function n(e){let{children:r}=e;return(0,a.jsx)(s.OJ,{children:r})}},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},5786:()=>{},7418:(e,r,t)=>{"use strict";t.d(r,{Header:()=>u});var a=t(5155),s=t(2115),n=t(3715),i=t(285),l=t(6874),o=t.n(l),d=t(5695);function c(e){let{items:r,className:t=""}=e,n=(0,d.usePathname)(),i=(0,s.useMemo)(()=>{if(r)return r;let e=n.split("/").filter(Boolean),t=[{label:"Home",href:"/"}],a="";return e.forEach(e=>{a+="/".concat(e);let r=e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");t.push({label:r,href:a})}),t},[n,r]);return i.length<=2?null:(0,a.jsx)("nav",{"aria-label":"Breadcrumb",className:"flex ".concat(t),children:(0,a.jsx)("ol",{className:"flex items-center space-x-2",children:i.map((e,r)=>(0,a.jsxs)("li",{className:"flex items-center",children:[r>0&&(0,a.jsx)("svg",{className:"flex-shrink-0 h-4 w-4 text-gray-400 mx-2",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M5.555 17.776l8-16 .894.448-8 16-.894-.448z"})}),r===i.length-1?(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e.label}):(0,a.jsx)(o(),{href:e.href,className:"text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:e.label})]},e.href))})})}function h(e){let{className:r="",placeholder:t="Search...",onClose:n}=e,[i,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(!1),[h,g]=(0,s.useState)(-1),u=(0,d.useRouter)(),x=(0,s.useRef)(null),m=i.trim()?[{label:"Dashboard",href:"/dashboard",description:"Main dashboard overview",category:"Navigation"},{label:"Calendar",href:"/calendar",description:"View and manage schedules",category:"Navigation"},{label:"Situations",href:"/situations",description:"Manage co-parenting situations",category:"Navigation"},{label:"Day Preferences",href:"/preferences/days",description:"Set your day preferences",category:"Preferences"},{label:"Date Preferences",href:"/preferences/dates",description:"Set your date preferences",category:"Preferences"},{label:"Handoff Times",href:"/preferences/handoff-times",description:"Configure handoff times",category:"Preferences"},{label:"Demo",href:"/onboarding",description:"Try the platform demo",category:"Navigation"},{label:"App Preview",href:"/app-preview",description:"Preview app features",category:"Navigation"}].filter(e=>{var r,t;return e.label.toLowerCase().includes(i.toLowerCase())||(null==(r=e.description)?void 0:r.toLowerCase().includes(i.toLowerCase()))||(null==(t=e.category)?void 0:t.toLowerCase().includes(i.toLowerCase()))}):[];(0,s.useEffect)(()=>{let e=e=>{if((e.metaKey||e.ctrlKey)&&"k"===e.key){var r;e.preventDefault(),c(!0),null==(r=x.current)||r.focus()}if("Escape"===e.key&&(c(!1),l(""),g(-1),null==n||n()),o&&m.length>0&&("ArrowDown"===e.key&&(e.preventDefault(),g(e=>(e+1)%m.length)),"ArrowUp"===e.key&&(e.preventDefault(),g(e=>e<=0?m.length-1:e-1)),"Enter"===e.key&&h>=0)){e.preventDefault();let r=m[h];u.push(r.href),c(!1),l(""),g(-1),null==n||n()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,m,h,u,n]);let f=e=>{u.push(e),c(!1),l(""),g(-1),null==n||n()};return o?(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>c(!1),children:(0,a.jsx)("div",{className:"flex items-start justify-center pt-20",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg mx-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("input",{ref:x,type:"text",value:i,onChange:e=>{l(e.target.value),g(-1)},placeholder:t,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})}),m.length>0&&(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 max-h-64 overflow-y-auto",children:m.map((e,r)=>(0,a.jsx)("button",{onClick:()=>f(e.href),className:"w-full text-left px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 ".concat(r===h?"bg-gray-100 dark:bg-gray-700":""),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.label}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description})]}),e.category&&(0,a.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-600 px-2 py-1 rounded",children:e.category})]})},e.href))}),i&&0===m.length&&(0,a.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 p-4 text-center text-gray-500 dark:text-gray-400",children:['No results found for "',i,'"']}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 px-4 py-2 text-xs text-gray-500 dark:text-gray-400",children:(0,a.jsx)("span",{children:"Navigate with ↑↓, select with ↵, close with Esc"})})]})})}):(0,a.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center px-3 py-2 text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 ".concat(r),"aria-label":"Search",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t,(0,a.jsx)("kbd",{className:"ml-2 text-xs text-gray-400 dark:text-gray-500 font-mono",children:"⌘K"})]})}class g{static getRecentItems(){try{let e=localStorage.getItem(this.STORAGE_KEY);if(!e)return[];return JSON.parse(e).sort((e,r)=>r.timestamp-e.timestamp)}catch(e){return[]}}static addRecentItem(e){try{let r=this.getRecentItems().filter(r=>r.href!==e.href),t=[{...e,timestamp:Date.now()},...r].slice(0,this.MAX_ITEMS);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(e){}}static clearRecentItems(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(e){}}static removeRecentItem(e){try{let r=this.getRecentItems().filter(r=>r.href!==e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r))}catch(e){}}static getPageLabel(e){let r={"/":"Home","/dashboard":"Dashboard","/calendar":"Calendar","/situations":"Situations","/onboarding":"Demo","/preferences":"Preferences","/preferences/days":"Day Preferences","/preferences/dates":"Date Preferences","/preferences/handoff-times":"Handoff Times","/app-preview":"App Preview","/login":"Sign In","/signup":"Sign Up"};if(r[e])return r[e];let t=e.split("/").filter(Boolean);return 0===t.length?"Home":t[t.length-1].split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}static trackPageVisit(e){if(["/login","/signup","/"].includes(e))return;let r=this.getPageLabel(e);this.addRecentItem({label:r,href:e})}}function u(){let{user:e,isGuest:r,signOut:t}=(0,n.As)(),{shouldShowConversionPrompt:l,shouldShowUrgentPrompt:u}=(0,n.Km)(),x=(0,d.usePathname)(),[m,f]=(0,s.useState)(!1),[p,y]=(0,s.useState)([]),[b,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{g.trackPageVisit(x),y(g.getRecentItems())},[x]),(0,s.useEffect)(()=>{f(!1)},[x]);let k=[{href:"/onboarding",label:"Try Demo",requiresAuth:!1}],j=e?[{href:"/dashboard",label:"Dashboard",requiresAuth:!0},{href:"/calendar",label:"Calendar",requiresAuth:!0},{href:"/situations",label:"Situations",requiresAuth:!0},{href:"/preferences",label:"Preferences",requiresAuth:!0},...k]:k;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(o(),{href:"/",className:"text-xl font-bold text-gray-900 dark:text-white",children:"CoParent.Online"})}),(0,a.jsx)("nav",{className:"hidden lg:flex space-x-8",children:j.map(e=>(0,a.jsx)(o(),{href:e.href,className:"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white ".concat(x.startsWith(e.href)&&"/"!==e.href?"text-blue-600 dark:text-blue-400 font-medium":""),children:e.label},e.href))}),(0,a.jsxs)("div",{className:"hidden lg:flex items-center space-x-4",children:[(0,a.jsx)(h,{className:"w-64"}),p.length>0&&e&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>v(!b),className:"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300","aria-label":"Recent items",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),b&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-600 z-50",children:[(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600",children:"Recently Accessed"}),p.map(e=>(0,a.jsx)(o(),{href:e.href,onClick:()=>v(!1),className:"block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.label},e.href))]})]}),r&&(0,a.jsx)("div",{"data-testid":"guest-indicator",className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:"\uD83C\uDFAD Guest Mode"}),u&&(0,a.jsx)("div",{"data-testid":"urgent-conversion-prompt",className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:"⚠️ Session expires soon!"}),l&&!u&&(0,a.jsx)("div",{"data-testid":"conversion-prompt",className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:"\uD83D\uDCBE Save your progress"}),e?(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[r&&(0,a.jsx)(i.$,{"data-testid":"convert-to-permanent",variant:"outline",size:"sm",onClick:()=>window.location.href="/signup?convert=true",children:"Save Account"}),(0,a.jsx)("div",{"data-testid":"user-menu",className:"text-gray-700 dark:text-gray-300",children:e.full_name}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:t,children:"Sign Out"})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(o(),{href:"/login",children:(0,a.jsx)(i.$,{variant:"ghost",size:"sm","data-testid":"login-link",children:"Sign In"})}),(0,a.jsx)(o(),{href:"/signup",children:(0,a.jsx)(i.$,{size:"sm",children:"Sign Up"})})]})]}),(0,a.jsx)("div",{className:"lg:hidden",children:(0,a.jsxs)("button",{onClick:()=>f(!m),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-expanded":m,children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),m?(0,a.jsx)("svg",{className:"block h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,a.jsx)("svg",{className:"block h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),m&&(0,a.jsx)("div",{className:"lg:hidden border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"px-4 py-3 space-y-3",children:[(0,a.jsx)(h,{placeholder:"Search..."}),(0,a.jsx)("div",{className:"space-y-1",children:j.map(e=>(0,a.jsx)(o(),{href:e.href,className:"block px-3 py-2 rounded-md text-base font-medium ".concat(x.startsWith(e.href)&&"/"!==e.href?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e.label},e.href))}),p.length>0&&e&&(0,a.jsxs)("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-600",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 px-3 mb-2",children:"Recently Accessed"}),p.map(e=>(0,a.jsx)(o(),{href:e.href,className:"block px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:e.label},e.href))]}),(0,a.jsx)("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-600",children:e?(0,a.jsxs)("div",{className:"space-y-3",children:[r&&(0,a.jsx)(i.$,{"data-testid":"convert-to-permanent-mobile",variant:"outline",size:"sm",className:"w-full",onClick:()=>window.location.href="/signup?convert=true",children:"Save Account"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.full_name}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:t,children:"Sign Out"})]})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o(),{href:"/login",className:"block",children:(0,a.jsx)(i.$,{variant:"ghost",size:"sm",className:"w-full",children:"Sign In"})}),(0,a.jsx)(o(),{href:"/signup",className:"block",children:(0,a.jsx)(i.$,{size:"sm",className:"w-full",children:"Sign Up"})})]})})]})})]}),(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2",children:(0,a.jsx)(c,{})})}),!e&&(0,a.jsx)("div",{"data-testid":"login-prompt",className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[(0,a.jsx)(o(),{href:"/login",className:"text-blue-600 hover:text-blue-800",children:"Sign in"})," to save your preferences or"," ",(0,a.jsx)("button",{"data-testid":"start-guest-session",className:"text-blue-600 hover:text-blue-800 underline",onClick:()=>window.location.href="/onboarding",children:"try as guest"})]})}),b&&(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>v(!1)})]})}g.STORAGE_KEY="coparent-recent-items",g.MAX_ITEMS=5},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var a=t(2596),s=t(9688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[523,212,982,874,715,441,684,358],()=>r(3361)),_N_E=e.O()}]);